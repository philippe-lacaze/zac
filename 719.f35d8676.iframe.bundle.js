(self.webpackChunkzac_ng_lib=self.webpackChunkzac_ng_lib||[]).push([[719],{"./projects/zac-ng-lib/src/lib/button/control-bar/control-bar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/zac-ng-lib/src/lib/button/control-bar/control-bar.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>ControlBarComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var control_bar_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/button/control-bar/control-bar.component.scss?ngResource"),control_bar_componentngResource_default=__webpack_require__.n(control_bar_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),button_config=__webpack_require__("./projects/zac-ng-lib/src/lib/button/button-config.ts"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),boolean_property_DaaVhX5A=__webpack_require__("./node_modules/@angular/cdk/fesm2022/boolean-property-DaaVhX5A.mjs"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),button_component=__webpack_require__("./projects/zac-ng-lib/src/lib/button/button.component.ts"),configuration_zac=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/config/configuration-zac.ts");class ControlBarConfig extends configuration_zac.oc{validationButtonNames;abandonButtonNames;configIntranet={validationButtonNames:["Valider"],abandonButtonNames:["Abandonner"]};configExtranet={validationButtonNames:["Suivant","Precedent"],abandonButtonNames:["Abandonner","ContinuerPlusTard"]}}const CONTROL_BAR_CONFIG_TOKEN=new core.InjectionToken("ZacButtonConfigToken",{providedIn:"platform",factory:()=>CONTROL_BAR_CONFIG_DEFAULT}),CONTROL_BAR_CONFIG_DEFAULT=new configuration_zac.MP(new ControlBarConfig).asThemeSensitiveRoot();let ControlBarComponent=class ControlBarComponent{static ConfigToken=CONTROL_BAR_CONFIG_TOKEN;static validationButtons=["Suivant","Precedent"];static abandonButtons=["Abandonner","ContinuerPlusTard"];allButtonsDef=button_config.ei;config=(0,core.inject)(CONTROL_BAR_CONFIG_TOKEN);_validationButtonNames;_abandonButtonNames;set validationButtonNames(value){let buttonNames;buttonNames="string"==typeof value?this.coerceToArray(value):value,this._validationButtonNames=buttonNames}set abandonButtonNames(value){let buttonNames;buttonNames="string"==typeof value?this.coerceToArray(value):value,this._abandonButtonNames=buttonNames}validationButtonConfig=[];abandonButtonConfig=[];set navigationRole(value){this._navigationRole=(0,boolean_property_DaaVhX5A.c)(null==value||value)}get navigationRole(){return this._navigationRole}_navigationRole=!0;constructor(){this.config.configureComponent(this)}action=(0,fromEvent.R)((0,core.inject)(core.ElementRef).nativeElement,"click").pipe((0,map.T)((event=>{if(event&&event instanceof Event){const target=event?.target;return target?.getAttribute("name")??void 0}})),(0,filter.p)((value=>void 0!==value)));get validationButtonNames(){return this._validationButtonNames??[]}get abandonButtonNames(){return this._abandonButtonNames??[]}isValidButtonName(button){return button in this.allButtonsDef}coerceToArray(value){return value.split(",")}static ctorParameters=()=>[];static propDecorators={validationButtonNames:[{type:core.Input}],abandonButtonNames:[{type:core.Input}],validationButtonConfig:[{type:core.Input}],abandonButtonConfig:[{type:core.Input}],navigationRole:[{type:core.Input}],action:[{type:core.Output}]}};ControlBarComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-control-bar",template:'<ng-container *ngIf="navigationRole !== false; else noNavigationRole">\n  <nav class="control_bar" role="navigation">\n    <ng-container [ngTemplateOutlet]="body"></ng-container>\n  </nav>\n</ng-container>\n\n<ng-template #noNavigationRole>\n  <section class="control_bar">\n    <ng-container [ngTemplateOutlet]="body"></ng-container>\n  </section\n  >\n</ng-template>\n\n<ng-template #body>\n  <div\n    class="control_bar-container_validation"\n    *ngIf="validationButtonConfig?.length; else validationNames"\n    [ngClass]="{ \'--alone\': 1 === validationButtonConfig?.length }"\n  >\n    <ng-container *ngFor="let buttonDef of validationButtonConfig">\n      <zac-button [config]="buttonDef"></zac-button>\n    </ng-container>\n  </div>\n  <ng-template #validationNames>\n    <div\n      class="control_bar-container_validation"\n      *ngIf="validationButtonNames?.length"\n      [ngClass]="{ \'--alone\': 1 === validationButtonNames.length }"\n    >\n      <ng-container *ngFor="let button of validationButtonNames">\n        <zac-button\n          *ngIf="isValidButtonName(button)"\n          [name]="button"\n        ></zac-button>\n      </ng-container>\n    </div>\n  </ng-template>\n\n\n  <div\n    class="control_bar-container_abandon"\n    *ngIf="abandonButtonConfig?.length; else abandonsNames"\n    [ngClass]="{ \'--alone\': 1 === abandonButtonConfig?.length }"\n  >\n    <ng-container *ngFor="let buttonDef of abandonButtonConfig">\n      <zac-button [config]="buttonDef"></zac-button>\n      <div class="separator"></div>\n    </ng-container>\n  </div>\n\n  <ng-template #abandonsNames>\n  <div\n    class="control_bar-container_abandon"\n    *ngIf="abandonButtonNames?.length"\n    [ngClass]="{ \'--alone\': 1 === abandonButtonNames.length }"\n  >\n    <ng-container *ngFor="let button of abandonButtonNames">\n      <zac-button\n        *ngIf="isValidButtonName(button)"\n        [name]="button"\n      ></zac-button>\n      <div class="separator"></div>\n    </ng-container>\n  </div>\n  </ng-template>\n</ng-template>\n',encapsulation:core.ViewEncapsulation.None,imports:[common_module_Dx7dWex5.bT,common_module_Dx7dWex5.T3,common_module_Dx7dWex5.YU,button_component.Q,common_module_Dx7dWex5.Sq],changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[control_bar_componentngResource_default()]})],ControlBarComponent)},"./projects/zac-ng-lib/src/lib/shared/service/store/abstract-http-store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>AbstractHttpStore});var RequestMethodEnum,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),ReplaySubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),throwError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),module_z3bvLlVg=__webpack_require__("./node_modules/@angular/common/fesm2022/module-z3bvLlVg.mjs"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),concatMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");function httpRequestToPromise(request){return(0,firstValueFrom._)(request)}function buildUrlWithParams(url,params,isEncodeURI=!0){let sep,finalUrl=url,parameters="";if(params&&params.length>0){const arrayParam=[...params];for(const param of arrayParam){if("object"==typeof param){Object.keys(param).forEach((key=>{sep=sep?"&":"?",parameters=sep+key+"="+param[key],finalUrl+=parameters}));break}finalUrl=finalUrl+"/"+param}}return isEncodeURI?encodeURI(finalUrl):finalUrl}!function(RequestMethodEnum){RequestMethodEnum.GET="GET",RequestMethodEnum.POST="POST",RequestMethodEnum.HEAD="HEAD",RequestMethodEnum.PUT="PUT",RequestMethodEnum.DELETE="DELETE",RequestMethodEnum.CONNECT="CONNECT",RequestMethodEnum.OPTIONS="OPTIONS",RequestMethodEnum.TRACE="TRACE"}(RequestMethodEnum||(RequestMethodEnum={}));var StoreStatus,core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");!function(StoreStatus){StoreStatus.IDLE="IDLE",StoreStatus.LOADING="LOADING",StoreStatus.LOADED="LOADED",StoreStatus.ERROR="ERROR"}(StoreStatus||(StoreStatus={}));let AbstractHttpStore=class AbstractHttpStore{httpClient;clone=!0;elementType;get lastValue(){return this._lastValue}set lastValue(value){this._lastValue=value,this._$value.set(value)}_lastValue;get $value(){return this._$value.asReadonly()}_$value=(0,core.signal)(void 0);get lastRequestedValue(){return this._lastRequestedValue}set lastRequestedValue(value){this._lastRequestedValue=value,this._$value.set(value)}_lastRequestedValue;$status=(0,core.signal)(StoreStatus.IDLE);_valueEmitter$;get valueEmitter$(){return this._valueEmitter$||(this._valueEmitter$=(void 0!==this.initialValue()?new BehaviorSubject.t(this.initialValue()):new ReplaySubject.m(1)).pipe((0,catchError.W)((_=>(0,of.of)(this._lastValue))))),this._valueEmitter$}cacheValid=!1;options=void 0;buildUrl(method,...params){if(method===RequestMethodEnum.GET)return buildUrlWithParams(this.url,params);if(method===RequestMethodEnum.DELETE){const id=this.$value()?.id;if(id)return buildUrlWithParams(this.url,id)}return this.url}initialValue(){}getWriteMethod(){return RequestMethodEnum.POST}value$=this.valueEmitter$.pipe((0,map.T)((v=>this.clone?this.createNewInstanceWithValues(v):v)),(0,tap.M)((v=>{this.options=void 0,console.debug(`AbstractHttpStore get value (cached) of ${this.url} =`,v)})));requestSubscription;constructor(httpClient){this.httpClient=httpClient,this.cacheValid=void 0!==this.initialValue(),this.lastValue=this.initialValue()}withOptions(options){return this.options=options,this}read(...params){return this.listen(...params).pipe((0,take.s)(1))}get(...params){return this.doHttpGetRequest(...params).pipe((0,take.s)(1))}listen(...params){return this.cacheValid?this.value$:(this.cacheValid=!0,this.doHttpGetRequestAndEmitValue(...params).pipe((0,concatMap.H)((v=>this.value$))))}write(data){return this.cacheValid=!0,this.publishNewValue(data),this.value$.pipe((0,take.s)(1))}post(data,...params){return void 0!==data?this.doHttpPostRequest(data,...params):this.doHttpPostRequest(this.$value()??null,...params)}delete(...params){return this.httpClient.delete(this.buildUrl(RequestMethodEnum.DELETE))}postAndWrite(data,...params){return this.post(data,...params).pipe((0,concatMap.H)((v=>this.write(v))),(0,take.s)(1))}clearCache(){this.$status.set(StoreStatus.IDLE),this.cacheValid=!1,this.lastValue=void 0}getPromise(...params){return httpRequestToPromise(this.get(...params))}readPromise(...params){return httpRequestToPromise(this.get(...params))}resolve(route,state){return this.read()}fromJson(datas){return datas}toJson(datas){return datas}doHttpGetRequest(...params){this.$status.set(StoreStatus.LOADING);const finalUrl=this.buildUrl(RequestMethodEnum.GET,...params);return this.httpClient.get(finalUrl,this.options).pipe((0,tap.M)((_=>this.options=void 0)),(0,map.T)((value=>(console.debug(`AbstractHttpStore receive http GET REQUEST for ${finalUrl} =`,value),this.createNewInstanceWithValues(value)))),(0,tap.M)((value=>{this.lastRequestedValue=value,this.$status.set(StoreStatus.LOADED)})),(0,catchError.W)((e=>(this.$status.set(StoreStatus.ERROR),(0,throwError.$)((()=>e))))))}doHttpPostRequest(data,...params){return this.$status.set(StoreStatus.LOADING),this.httpClient.post(this.buildUrl(this.getWriteMethod(),...params),data?this.toJson(data):null,this.options).pipe((0,tap.M)((_=>this.options=void 0)),(0,map.T)((value=>(console.debug(`AbstractHttpStore receive http POST REQUEST for ${this.url} =`,value),this.$status.set(StoreStatus.LOADED),value?this.createNewInstanceWithValues(value):this.createNewInstanceWithValues(data??{})))),(0,tap.M)((value=>{value&&(this.lastRequestedValue=value??this.createNewInstanceWithValues(data??{}))})),(0,catchError.W)((e=>(this.$status.set(StoreStatus.ERROR),(0,throwError.$)((()=>e))))))}instanceCounter=0;incrementCounter(){return this.instanceCounter++,this.instanceCounter>Number.MAX_SAFE_INTEGER&&(this.instanceCounter=Number.MIN_SAFE_INTEGER),this.instanceCounter}createNewInstanceWithValues(v){if(!v)return v;try{let newInstance=this.dataType?this.createInstanceForCtor(this.dataType):{};return Object.assign(newInstance,this.fromJson(v)),this.addInstanceCounterInStore(newInstance),this.dataType===Array&&this.elementType&&(newInstance=newInstance.map((element=>{const typedElement=this.createInstanceForCtor(this.elementType);return Object.assign(typedElement,element),typedElement}))),newInstance}catch(e){throw console.error(e),e}}addInstanceCounterInStore(newInstance){Object.defineProperty(newInstance,"_idInStore",{value:this.incrementCounter(),writable:!1,enumerable:!1,configurable:!1})}createInstanceForCtor(func){return new func.prototype.constructor}doHttpGetRequestAndEmitValue(...params){return this.doHttpGetRequest(...params).pipe((0,tap.M)({next:value=>{this.publishNewValue(value)},error:err=>{this.cacheValid=!1,this.valueEmitter$.error(err)}}))}publishNewValue(newValue){this.lastValue=newValue,this.valueEmitter$.next(newValue)}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};AbstractHttpStore=(0,tslib_es6.Cg)([(0,core.Injectable)()],AbstractHttpStore)},"./projects/zac-ng-lib/src/lib/shared/widget/abstract-combobox/abstract-combobox.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>AbstractComboboxComponent});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),element_x4z00URv=__webpack_require__("./node_modules/@angular/cdk/fesm2022/element-x4z00URv.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),value_accessor_base=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/value-accessor-base.ts"),event_queue=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/event-queue.ts"),choice_listbox_component=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/choice-listbox/choice-listbox.component.ts"),content_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/content.directive.ts");let BottomDirective=class BottomDirective{templateRef;constructor(templateRef){this.templateRef=templateRef}static ctorParameters=()=>[{type:core.TemplateRef}]};BottomDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"zacBottom,[zacBottom]",standalone:!0})],BottomDirective);var ApiGouvEnum,coercions=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/coercions.ts"),focusgroup_accessor_base=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/focusgroup-accessor-base.ts"),focus_tracker_service=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/service/focus-tracker/focus-tracker.service.ts"),dom_util=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/dom-util.ts");!function(ApiGouvEnum){ApiGouvEnum.adresse="adresse",ApiGouvEnum.commune="commune",ApiGouvEnum.departement="departement",ApiGouvEnum.codePostalCommune="codePostalCommune"}(ApiGouvEnum||(ApiGouvEnum={}));var module_z3bvLlVg=__webpack_require__("./node_modules/@angular/common/fesm2022/module-z3bvLlVg.mjs"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),abstract_http_store=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/service/store/abstract-http-store.ts"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js");class AbstractComboboxSourceService extends abstract_http_store.O{static $neutralChoiceTupleValue=value=>(0,of.of)([[value]]).pipe((0,shareReplay.t)(1));error=new Subject.B;constructor(httpClient){super(httpClient)}fromCodeLibelleArrayToChoiceTupleArray(list,forCodeValue){return list?.map((codeLibelle=>codeLibelle.libelle??codeLibelle.toString()?[codeLibelle.code,codeLibelle]:[codeLibelle.code]))??[]}filterError(error){throw this.error.next(error),error}}let ApiCommuneDaoService=class ApiCommuneDaoService extends AbstractComboboxSourceService{dataType=Array;elementType=CommuneCodeLibelle;url="https://geo.api.gouv.fr/communes";constructor(httpClient){super(httpClient)}configure(combobox){var _this=this;return(0,asyncToGenerator.A)((function*(){combobox.$choiceListSource=_this.getChoiceListSource.bind(_this),combobox.$fromPropertyChoiceListSource=_this.getFromPropertyChoiceListSource.bind(_this)}))()}getChoiceListSource(value){let param;return param=value&&!isNaN(parseInt(value.charAt(0),10))?{codePostal:value}:{nom:value},this.get(param).pipe((0,catchError.W)(this.filterError.bind(this)),(0,map.T)((l=>param.codePostal?this.fromCodeLibelleArrayToChoiceTupleArray(l,value):this.fromCodeLibelleArrayToChoiceTupleArray(l))))}getFromPropertyChoiceListSource(value){return this.get({code:value}).pipe((0,catchError.W)(this.filterError.bind(this)),(0,map.T)((l=>this.fromCodeLibelleArrayToChoiceTupleArray(l,value))))}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};ApiCommuneDaoService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiCommuneDaoService);class CommuneCodeLibelle{code;nom;codesPostaux;codeDepartement;constructor(code,nom,codesPostaux){this.code=code,this.nom=nom,this.codesPostaux=codesPostaux}get libelle(){return this.nom}toString(){return this.nom.toString()}}let ApiDepartementDaoService=class ApiDepartementDaoService extends AbstractComboboxSourceService{dataType=Array;elementType=DepartementCodeLibelle;url="https://geo.api.gouv.fr/departements";constructor(httpClient){super(httpClient)}configure(combobox){var _this=this;return(0,asyncToGenerator.A)((function*(){combobox.choiceList=yield(0,firstValueFrom._)(_this.read().pipe((0,catchError.W)(_this.filterError.bind(_this)),(0,map.T)((l=>_this.fromCodeLibelleArrayToChoiceTupleArray(l)))))}))()}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};ApiDepartementDaoService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiDepartementDaoService);class DepartementCodeLibelle{code;nom;codeRegion;constructor(code,nom){this.code=code,this.nom=nom}get libelle(){return this.nom}toString(){return this.libelle}}let ApiAdresseDaoService=class ApiAdresseDaoService extends AbstractComboboxSourceService{dataType=GeoCode;url="https://api-adresse.data.gouv.fr/search/";constructor(httpClient){super(httpClient)}configure(combobox){var _this=this;return(0,asyncToGenerator.A)((function*(){combobox.$choiceListSource=value=>_this.get({q:value}).pipe((0,catchError.W)((e=>(_this.error.next(e),(0,of.of)({})))),(0,map.T)(_this.fromGeocodeJSONToAdresseCodeLibelleArray),(0,map.T)((l=>_this.fromCodeLibelleArrayToChoiceTupleArray(l)))),combobox.$fromPropertyChoiceListSource=AbstractComboboxSourceService.$neutralChoiceTupleValue}))()}fromGeocodeJSONToAdresseCodeLibelleArray(geoCode){return geoCode?(geoCode?.features??[]).map((v=>Object.assign(new AdresseCodeLibelle,v.properties??{}))):[]}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};ApiAdresseDaoService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiAdresseDaoService);class GeoCode{features}class AdresseCodeLibelle{label;score;housenumber;id;name;postcode;citycode;x;y;city;district;context;type;importance;street;get code(){return this.label}toString(){return this.label}}class CodePostalEtCodeCommuneInsee{codePostal;codeCommuneInsee;_libelleCommune;constructor(codePostal,codeCommuneInsee,libelleCommune){this.codePostal=codePostal,this.codeCommuneInsee=codeCommuneInsee,this._libelleCommune=libelleCommune}toString(){return this.codePostal}get libelleCommune(){return this._libelleCommune}get ville(){return this._libelleCommune}}let ApiCodePostalCommuneDaoService=class ApiCodePostalCommuneDaoService extends ApiCommuneDaoService{constructor(httpClient){super(httpClient)}configure(combobox){var _this=this;return(0,asyncToGenerator.A)((function*(){combobox.$choiceListSource=_this.getChoiceListSource.bind(_this),combobox.$fromPropertyChoiceListSource=value=>{const param={codePostal:(value&&value.toString())??"",code:value.codeCommuneInsee};return _this.get(param).pipe((0,catchError.W)((err=>_this.filterError(err))),(0,map.T)((l=>_this.fromCodeLibelleArrayToChoiceTupleArray(l,value))))}}))()}fromCodeLibelleArrayToChoiceTupleArray(codeLibelleArray,codePostalSeulOuCodePostalEtCodeCommuneInseeValue){return codeLibelleArray?.flatMap((codeLibelle=>this.eclateParCoupleUniqueCodePostalCodeCommune(codeLibelle,codePostalSeulOuCodePostalEtCodeCommuneInseeValue))).map((codeLibelle=>this.toChoiceTuple(codeLibelle,codePostalSeulOuCodePostalEtCodeCommuneInseeValue)))??[]}toChoiceTuple(codeLibelle,codePostalEtCodeCommuneInseeValue){const communeCodeLibelle=codeLibelle,codePostal=(codePostalEtCodeCommuneInseeValue&&`${codePostalEtCodeCommuneInseeValue}`)??(communeCodeLibelle.codesPostaux&&communeCodeLibelle.codesPostaux[0]);return[new CodePostalEtCodeCommuneInsee(codePostal,`${codeLibelle.code}`,codeLibelle.libelle?.toString()),new CodePostalCommuneCodeLibelle(codeLibelle.code,codeLibelle.libelle,codePostal)]}eclateParCoupleUniqueCodePostalCodeCommune(codeLibelle,codePostalSeulOuCodePostalEtCodeCommuneInseeValue){const communeCodeLibelle=codeLibelle;if(codePostalSeulOuCodePostalEtCodeCommuneInseeValue&&`${codePostalSeulOuCodePostalEtCodeCommuneInseeValue}`||!communeCodeLibelle.codesPostaux)return[codeLibelle];if(1===communeCodeLibelle.codesPostaux.length)return[codeLibelle];{let newList;return newList=communeCodeLibelle.codesPostaux.map((cp=>new CommuneCodeLibelle(communeCodeLibelle.code,communeCodeLibelle.nom,[cp]))),newList}}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};ApiCodePostalCommuneDaoService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiCodePostalCommuneDaoService);class CodePostalCommuneCodeLibelle extends CommuneCodeLibelle{constructor(code,nom,codePostal){super(code,nom??"",[codePostal??""])}toString(){return`${this.codesPostaux?this.codesPostaux[0]+" - ":""}${this.nom}`}get codePostal(){return(this.codesPostaux&&this.codesPostaux[0])??""}set codePostal(codePostal){this.codesPostaux=[codePostal]}}let ApiGouvStrategyService=class ApiGouvStrategyService{strategies=new Map([[ApiGouvEnum.commune,(0,core.inject)(ApiCommuneDaoService)],[ApiGouvEnum.departement,(0,core.inject)(ApiDepartementDaoService)],[ApiGouvEnum.codePostalCommune,(0,core.inject)(ApiCodePostalCommuneDaoService)],[ApiGouvEnum.adresse,(0,core.inject)(ApiAdresseDaoService)]]);getStrategies(){return this.strategies}};ApiGouvStrategyService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiGouvStrategyService);let AbstractComboboxComponent=class AbstractComboboxComponent extends value_accessor_base.k{renderer;cdr;focusTracker;static $neutralChoiceTupleValue=AbstractComboboxSourceService.$neutralChoiceTupleValue;_sourceService;set choiceList(value){this.setChoiceList(value)}get choiceList(){return this.getChoiceList()}$choiceListSource;$fromPropertyChoiceListSource;set sourceService(value){if(value instanceof AbstractComboboxSourceService){const serviceChange=value!==this._sourceService;this._sourceService=value,value&&this.afterSourceServiceInit(serviceChange).then()}else if(value&&value in ApiGouvEnum){const service=this.apiGouvStrategyService.getStrategies().get(value),serviceChange=service!==this._sourceService;this._sourceService=service,value&&this.afterSourceServiceInit(serviceChange).then()}}apiGouvStrategyService=(0,core.inject)(ApiGouvStrategyService);get sourceService(){return this._sourceService}set listSize(value){value!==this._listSize&&(this._listSize=(0,element_x4z00URv.c)(value))}get listSize(){return this._listSize}autocomplete;choiceChange=new core.EventEmitter;contentRef;bottomRef;inputElementRef;choiceListboxComponent;lastChoiceKey;isObservableSourceForEachEntry=!0;visibleList;focused=!1;clearState(){this.inputElement&&(this.inputElement.value=""),this.clearInternalState()}get selectedOptionKey(){return this._selectedOptionKey}set selectedOptionKey(value){this._selectedOptionKey=value}get selectedOptionValue(){return this._selectedOptionValue}set selectedOptionValue(value){this._selectedOptionValue=value??""}get inputElement(){return this.inputElementRef?.nativeElement}get listboxId(){return`${this.id}-listbox`}get invalidEntry(){return this._invalidEntry}set invalidEntry(value){this._invalidEntry=value,value&&this.unsetInnerValue()}get nativeElement(){return this.elementRef?.nativeElement}get isStaticChoiceList(){return!!this.choiceList?.length}_choiceList;_selectedOptionKey;_selectedOptionValue;_listSize=5;emptyTuple=[];_invalidEntry=!1;effectWhenReadonlyStateChange=(0,core.effect)((()=>{this.whenReadonlyStateChange()}));constructor(injector,elementRef,renderer,cdr,focusTracker){super(injector,elementRef),this.renderer=renderer,this.cdr=cdr,this.focusTracker=focusTracker,elementRef.nativeElement.focus=this.focus.bind(this)}ngOnInit(){super.ngOnInit(),this.renderer.addClass(this.elementRef.nativeElement,"ng-control"),this.renderer.addClass(this.elementRef.nativeElement,"combobox")}onFocusIn(){this.focused=!0}onFocusOut(element,event){var _this=this;return(0,asyncToGenerator.A)((function*(){yield event_queue.C.skipTurn(),_this.focusTracker.isActiveElementIn(_this.elementRef.nativeElement)||(_this.focused=!1,yield _this.onComponentFocusLost(!1),null==_this.innerValue&&_this.clearState(),_this.isListboxOpened()||_this.closeListbox())}))()}onMouseEvent(element,event){var _this2=this;return(0,asyncToGenerator.A)((function*(){event&&_this2.focused&&!(0,dom_util.OH)(event,_this2.elementRef.nativeElement)&&(_this2.focused=!1,yield _this2.onComponentFocusLost(),null==_this2.innerValue&&_this2.clearState(),_this2.isListboxOpened()||_this2.closeListbox())}))()}onTab(element,event){var _this3=this;return(0,asyncToGenerator.A)((function*(){if("Escape"===event.key)_this3.onEscapeKeyDown();else if("Tab"===event.key)switch(element.tagName){case"OUTPUT":case"INPUT":yield _this3.onComponentFocusLost()}}))()}clearInternalState(){this.selectedOptionKey=void 0,this.selectedOptionValue=void 0,this.unsetInnerValue(),this.invalidEntry=!1}onEscapeKeyDown(){this.closeListbox(),this.inputElement?.focus()}whenReadonlyStateChange(){!this.$isReadonlyState()&&this.innerValue&&this.whenOutterValueChange(this.innerValue)}onListboxChoice(choiceTuple){var _this4=this;return(0,asyncToGenerator.A)((function*(){[_this4.selectedOptionKey,_this4.selectedOptionValue]=choiceTuple,yield _this4.determineInnerValue(),_this4.inputElement?.focus()}))()}ngAfterViewInit(){super.ngAfterViewInit(),this.autocomplete?this.renderer.setAttribute(this.getLabelForTargetElement(),"autocomplete",this.autocomplete):this.renderer.setAttribute(this.getLabelForTargetElement(),"autocomplete","off")}getInputElementValue(){return this.inputElement?.value??""}setInputElementValue(value){this.inputElement&&(this.inputElement.value=value)}isListboxEmpty(){return 0>=(this.visibleList?.length??-1)}isListboxOpened(){return!this.isListboxEmpty()}getOptionId(i){return`${this.id}-option-${i}`}canOpenList(){return(this.visibleList&&this.visibleList.length>0)??!1}focus(){this.inputElement?.focus()}getLibelleOption(visibleOption){return this.getValueOrKey(visibleOption)?.toString()??""}ngOnDestroy(){this.closeListbox()}getChoiceList(){return this._choiceList}setChoiceList(choiceList){this._choiceList=(0,coercions.A)(choiceList),this.$choiceListSource=entry=>new BehaviorSubject.t(choiceList),this.isObservableSourceForEachEntry=!choiceList}openListBoxWith(_x){var _this5=this;return(0,asyncToGenerator.A)((function*(choices,giveFocusToListbox=!0){_this5.visibleList=choices,_this5.cdr.detectChanges(),giveFocusToListbox&&(yield event_queue.C.skipTurn(),_this5.giveFocusToListbox())})).apply(this,arguments)}whenOutterValueChange(key){var _superprop_getWhenOutterValueChange=()=>super.whenOutterValueChange,_this6=this;return(0,asyncToGenerator.A)((function*(){if(_superprop_getWhenOutterValueChange().call(_this6,key),yield event_queue.C.skipTurn(),null!=key)if(_this6.inputElement&&_this6.choiceList&&_this6.choiceList.length>0){const value=_this6.getOptionValueInChoiceListOrEmptyStringByKey(key);_this6.inputElement.value=value.toString(),_this6.selectedOptionValue=value,_this6.selectedOptionKey=void 0,_this6.selectedOptionKey=key,_this6.cdr.detectChanges()}else if(_this6.inputElement&&_this6.$choiceListSource){const choices=yield(0,firstValueFrom._)(_this6.getSourceWhenOuterValueChange(key)),choice=choices&&choices.length&&choices[0],libelle=(choice[0],choice[1]);_this6.inputElement.value=choice?_this6.getValueOrKey(choice)?.toString()??choice[0]?.toString()??"":key,_this6.selectedOptionValue=libelle,_this6.selectedOptionKey=void 0,_this6.selectedOptionKey=key,_this6.cdr.detectChanges()}else null==key?_this6.setInputElementValue(""):_this6.setInputElementValue(key);else null==key&&_this6.clearState()}))()}getSourceWhenOuterValueChange(key){return this.$fromPropertyChoiceListSource?this.$fromPropertyChoiceListSource(key):this.$choiceListSource(key)}setChoice(choice,isFree=!1){this.selectedOptionKey=choice[0],this.selectedOptionValue=choice[1];const oldValue=this.innerValue;null!=choice[0]?this.innerValue=choice[0]:this.innerValue=this.getValueOrKey(choice)?.toString(),oldValue!==this.innerValue&&this.choiceChange.next({choice,isFree}),this.setInputElementValue(this.getValueOrKey(choice)?.toString()??""),this.lastChoiceKey=this.innerValue}unsetInnerValue(){this.innerValue=null}onComponentFocusLost(){var _this7=this;return(0,asyncToGenerator.A)((function*(fireFocusLost=!0){yield _this7.determineInnerValue(),_this7.closeListbox(),_this7.touch(),_this7.cdr.detectChanges(),fireFocusLost&&(focusgroup_accessor_base.I.fireEvent(_this7.getNativeElement(),"focusout",!0),focusgroup_accessor_base.I.fireEvent(_this7.getNativeElement(),"blur",!1))})).apply(this,arguments)}giveFocusToListbox(){this.isListboxEmpty()||this.choiceListboxComponent?.focus()}findIndexOfCurrentInnerValueInList(list){let index=list?.findIndex((option=>option[0]===this.selectedOptionKey))??-1;return index<0&&null!=this.innerValue&&(index=list?.findIndex((option=>option[0]===this.innerValue))),index}getOptionKeyAndValueInChoiceListByKey(key){return this.choiceList?.find((choice=>choice[0]===key))??this.emptyTuple}getOptionValueInChoiceListOrEmptyStringByKey(key){if(null==key)return"";const kv=this.getOptionKeyAndValueInChoiceListByKey(key);return(kv&&this.getValueOrKey(kv))??""}getOptionKeyAndValueInChoiceListByValue(inputValue){return this.choiceList?.find((choice=>choice[1]===inputValue))??this.emptyTuple}giveFocusToInput(){this.inputElement?.focus()}closeListbox(){this.visibleList=[],this.cdr.detectChanges()}getValueOrKey(choiceTuple){return choiceTuple[1]??choiceTuple[0]}reinitialize(){this.ngAfterViewInit()}determineIfRoleGroup(){return!1}$libelleForValue=(0,core.signal)(void 0);findLibelleForValue(innerValue){this.$libelleForValue.set(""),null!=innerValue&&(this.choiceList?this.$libelleForValue.set(this.choiceList?.find((choice=>choice[0]===innerValue))?.[1]??""):this.$fromPropertyChoiceListSource?this.$fromPropertyChoiceListSource(this.innerValue).subscribe((v=>this.$libelleForValue.set(v))):this.$choiceListSource&&this.$choiceListSource(this.innerValue).subscribe((v=>this.$libelleForValue.set(v))))}afterSourceServiceInit(){var _this8=this;return(0,asyncToGenerator.A)((function*(serviceChange=!1){yield _this8.sourceService?.configure(_this8),yield event_queue.C.skipTurn(),_this8.reinitialize(),serviceChange&&(yield _this8.whenOutterValueChange(_this8.innerValue))})).apply(this,arguments)}static ctorParameters=()=>[{type:core.Injector},{type:core.ElementRef},{type:core.Renderer2},{type:core.ChangeDetectorRef},{type:focus_tracker_service.g}];static propDecorators={choiceList:[{type:core.Input}],$choiceListSource:[{type:core.Input}],$fromPropertyChoiceListSource:[{type:core.Input}],sourceService:[{type:core.Input}],listSize:[{type:core.Input}],autocomplete:[{type:core.Input}],choiceChange:[{type:core.Output}],contentRef:[{type:core.ContentChild,args:[content_directive.$,{read:core.TemplateRef}]}],bottomRef:[{type:core.ContentChild,args:[BottomDirective,{read:core.TemplateRef}]}],inputElementRef:[{type:core.ViewChild,args:["input"]}],choiceListboxComponent:[{type:core.ViewChild,args:["choiceListboxComponent",{read:choice_listbox_component.C}]}],onFocusIn:[{type:core.HostListener,args:["focusin",["$event.target","$event"]]}],onFocusOut:[{type:core.HostListener,args:["focusout",["$event.target","$event"]]}],onMouseEvent:[{type:core.HostListener,args:["document:click",["$event.target","$event"]]}],onTab:[{type:core.HostListener,args:["keydown",["$event.target","$event"]]}]}};AbstractComboboxComponent=(0,tslib_es6.Cg)([(0,core.Component)({template:"",standalone:!1})],AbstractComboboxComponent)},"./projects/zac-ng-lib/src/lib/shared/widget/choice-listbox/choice-listbox.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/zac-ng-lib/src/lib/shared/widget/choice-listbox/choice-listbox.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>ChoiceListboxComponent});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var choice_listbox_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/choice-listbox/choice-listbox.component.scss?ngResource"),choice_listbox_componentngResource_default=__webpack_require__.n(choice_listbox_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),focus_key_manager_C1rAQJ5z=__webpack_require__("./node_modules/@angular/cdk/fesm2022/focus-key-manager-C1rAQJ5z.mjs"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),dom_util=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/dom-util.ts");let FocusableOptionCdkSimpleDirective=class FocusableOptionCdkSimpleDirective{el;optionKey;optionValue;scrollableParent;focusOrigin;constructor(el){this.el=el}focus(origin){this.focusOrigin=origin,this.el.nativeElement.focus&&(this.el.nativeElement.focus({preventScroll:!0}),this.scrollableParent&&dom_util.bk.maintainScrollVisibility(this.el.nativeElement,this.scrollableParent))}static ctorParameters=()=>[{type:core.ElementRef}];static propDecorators={optionKey:[{type:core.Input}],optionValue:[{type:core.Input}],scrollableParent:[{type:core.Input}]}};FocusableOptionCdkSimpleDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[zacFocusableOption]",standalone:!0})],FocusableOptionCdkSimpleDirective);var ChoiceListboxComponent_1,element_x4z00URv=__webpack_require__("./node_modules/@angular/cdk/fesm2022/element-x4z00URv.mjs"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),configuration_zac=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/config/configuration-zac.ts");class ChoiceListboxConfig{listSizeStyleProperty="--zac-select-max-line-number";configureRow=(vab,row)=>{row&&vab.elementRef?.nativeElement.style.setProperty(this.listSizeStyleProperty,""+row)}}let ChoiceListboxComponent=class ChoiceListboxComponent{static{ChoiceListboxComponent_1=this}cdr;renderer;elementRef;static ConfigToken=new core.InjectionToken("ZacListboxConfigToken",{providedIn:"platform",factory:()=>new configuration_zac.MP(new ChoiceListboxConfig).asRoot()});choiceList;selectedValue=null;listboxId;canOpenList=!1;contentRef;bottomRef;tabSelect=!0;triggerElement;_listSize=5;config=(0,core.inject)(ChoiceListboxComponent_1.ConfigToken);set listSize(value){value!==this._listSize&&(this._listSize=(0,element_x4z00URv.c)(value),this.limitListboxSize())}get listSize(){return this._listSize}selectedChoice=new core.EventEmitter;activeElement=new core.EventEmitter;listeElementRef;internalOptionItems;selectedOptionKey;selectedOptionValue;$activeOption;optionActiveIndex;keyManager;$unsubFocusKeyManager=new Subject.B;constructor(cdr,renderer,elementRef){this.cdr=cdr,this.renderer=renderer,this.elementRef=elementRef}ngOnInit(){this.limitListboxSize()}ngOnChanges(changes){changes.choiceList?(this.initializeFocusKeyManager(),setTimeout((()=>this.initializeActiveElementForValue(this.selectedValue??void 0)))):(changes.selectedValue||changes.canOpenList)&&changes.canOpenList&&this.initializeActiveElementForValue(this.selectedValue??void 0)}ngAfterViewInit(){this.initializeFocusKeyManager()}ngOnDestroy(){this.$unsubFocusKeyManager.next(),this.$unsubFocusKeyManager.complete()}onClick(element,event){("LI"===element.tagName||element.matches(":root .combobox-list .combobox-list-item *"))&&this.selectOptionForKeyAndValue(this.getOptionKeyAndValueFromElement(element),element,!1).then()}onTab(element,event){var _this=this;return(0,asyncToGenerator.A)((function*(){yield _this.OnTabOrShiftTab(element,event)}))()}onShiftTab(element,event){var _this2=this;return(0,asyncToGenerator.A)((function*(){yield _this2.OnTabOrShiftTab(element,event)}))()}onKeyDown(element,event){"Tab"!==event.key&&"Shift"!==event.key&&("Enter"===event.key&&"LI"!==element.tagName||this.onOptionKeydownEvent(event,element).then())}getOptionId(i){return`${this.listboxId}-option-${i}`}isChoiceOptionActive(i){return i===this.optionActiveIndex}isChoiceOptionSelected(key){return key?.toString()===this.selectedValue}isListboxEmpty(){return 0>(this.choiceList?.length??-1)}getLibelleOption(visibleOption){return(this.getValueOrKey(visibleOption)??" ").toString()}getContextForChoiceTuple(choiceTuple){return{$implicit:choiceTuple}}getValueOrKey(choiceTuple){return choiceTuple[1]??choiceTuple[0]}onOptionKeydownEvent(event,element){var _this3=this;return(0,asyncToGenerator.A)((function*(){switch(event.key){case"Spacebar":case" ":case"Enter":_this3.stopEvent(event),yield _this3.selectOptionForKeyAndValue(_this3.getOptionKeyAndValueForEvent(event),element),_this3.cdr.detectChanges();break;case"Escape":_this3.closeListbox();break;default:_this3.keyManager?.onKeydown(event)}}))()}selectOptionForKeyAndValue(_x,_x2){var _this4=this;return(0,asyncToGenerator.A)((function*([dataKey,dataValue],selectedHtmlElement,andGivefocusToInput=!0){_this4.selectedOptionKey=dataKey,_this4.selectedOptionValue=dataValue??dataKey??"",_this4.closeListbox(),_this4.selectedChoice.emit([_this4.selectedOptionKey,_this4.selectedOptionValue??" "]),_this4.onOptionFocus(selectedHtmlElement)})).apply(this,arguments)}getOptionKeyAndValueForEvent(event){const target=event.target;return this.getOptionKeyAndValueFromElement(target)}getOptionKeyAndValueFromElement(target){const index=target?.getAttribute("aria-posinset");let dataKey,dataValue;return null!=index&&(dataKey=this.internalOptionItems.get(Number(index))?.optionKey,dataValue=this.internalOptionItems.get(Number(index))?.optionValue),null!=dataKey?[dataKey,dataValue]:[void 0,void 0]}initializeFocusKeyManager(){this.keyManager=new focus_key_manager_C1rAQJ5z.F(this.internalOptionItems).withVerticalOrientation(!0).withWrap().withHomeAndEnd().withPageUpDown(!0,10),this.$activeOption=this.keyManager?.change,this.$activeOption?.pipe((0,takeUntil.Q)(this.$unsubFocusKeyManager)).subscribe((index=>this.optionActiveIndex=index))}destroyFocusKeyManager(){this.$unsubFocusKeyManager.next(),this.keyManager=void 0,this.$activeOption=void 0}closeListbox(){(null!=this.optionActiveIndex||this.choiceList)&&(this.optionActiveIndex=void 0,this.choiceList=void 0),this.keyManager&&this.destroyFocusKeyManager(),this.activeElement.emit(void 0)}stopEvent(event){event.stopPropagation(),event.stopImmediatePropagation(),event.preventDefault()}focus(){(this.optionActiveIndex??-1)<0&&(this.optionActiveIndex=0),this.keyManager&&this.keyManager.setActiveItem(this.optionActiveIndex)}onOptionFocus(element){this.activeElement.emit(element)}limitListboxSize(){this.elementRef.nativeElement.querySelector(".combobox-list")&&this.config.configureRow(this,this.listSize)}OnTabOrShiftTab(element,event){var _this5=this;return(0,asyncToGenerator.A)((function*(){if("LI"===element.tagName&&_this5.tabSelect){const activeItem=_this5.keyManager?.activeItem;activeItem&&(yield _this5.selectOptionForKeyAndValue(_this5.getOptionKeyAndValueForEvent(event),element))}}))()}initializeActiveElementForValue(selectedValue){const i=this.choiceList?.findIndex((c=>c[0]===selectedValue))??0;i>=0&&this.keyManager?.setActiveItem(i)}static ctorParameters=()=>[{type:core.ChangeDetectorRef},{type:core.Renderer2},{type:core.ElementRef}];static propDecorators={choiceList:[{type:core.Input}],selectedValue:[{type:core.Input}],listboxId:[{type:core.Input}],canOpenList:[{type:core.Input}],contentRef:[{type:core.Input}],bottomRef:[{type:core.Input}],tabSelect:[{type:core.Input}],triggerElement:[{type:core.Input}],listSize:[{type:core.Input}],selectedChoice:[{type:core.Output}],activeElement:[{type:core.Output}],listeElementRef:[{type:core.ViewChild,args:["listbox_container"]}],internalOptionItems:[{type:core.ViewChildren,args:[FocusableOptionCdkSimpleDirective]}],onTab:[{type:core.HostListener,args:["keydown.tab",["$event.target","$event"]]}],onShiftTab:[{type:core.HostListener,args:["keydown.shift.tab",["$event.target","$event"]]}],onKeyDown:[{type:core.HostListener,args:["keydown",["$event.target","$event"]]}]}};ChoiceListboxComponent=ChoiceListboxComponent_1=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-choice-listbox",template:'<div class="combobox-list-content">\n  <ul\n    [attr.id]="listboxId"\n    #listbox_container\n    role="listbox"\n    class="combobox-list"\n    tabindex="-1"\n  >\n    <li\n      *ngFor="let choiceOption of choiceList; index as i"\n      #li\n      tabindex="-1"\n      role="option"\n      zacFocusableOption [scrollableParent]="listbox_container"\n      class="combobox-list-item"\n      [attr.id]="getOptionId(i)"\n      [ngClass]="{\n        active: isChoiceOptionActive(i),\n        selected: isChoiceOptionSelected(choiceOption[0])\n      }"\n      [attr.aria-posinset]="i"\n      [attr.aria-setsize]="choiceList?.length ?? 0"\n      [attr.aria-selected]="isChoiceOptionSelected(choiceOption[0])"\n      [optionKey]="choiceOption[0]"\n      [optionValue]="choiceOption[1]"\n      (click)="onClick(li, $event)"\n      (focus)="onOptionFocus($event.target)"\n    >\n      <ng-container *ngIf="contentRef; else libelleSimple">\n        <div\n          *ngTemplateOutlet="contentRef;\n          context: getContextForChoiceTuple(choiceOption)"\n        ></div>\n      </ng-container>\n      <ng-template #libelleSimple>{{\n        getLibelleOption(choiceOption)\n      }}</ng-template>\n    </li>\n  </ul>\n  <div\n    *ngIf="bottomRef && (choiceList?.length ?? -1 > 0)"\n    class="combobox-list-bottom"\n  >\n    <ng-container *ngTemplateOutlet="bottomRef"></ng-container>\n  </div>\n</div>\n',encapsulation:core.ViewEncapsulation.None,imports:[common_module_Dx7dWex5.YU,FocusableOptionCdkSimpleDirective,common_module_Dx7dWex5.bT,common_module_Dx7dWex5.T3,common_module_Dx7dWex5.Sq],changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[choice_listbox_componentngResource_default()]})],ChoiceListboxComponent)},"./projects/zac-ng-lib/src/lib/shared/widget/content.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>ContentDirective});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let ContentDirective=class ContentDirective{templateRef;focusable=!1;constructor(templateRef){this.templateRef=templateRef}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef}];static propDecorators={focusable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}]}};ContentDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"zacContent,[zacContent]",standalone:!0})],ContentDirective);let AfterDirective=class AfterDirective{templateRef;after;focusable=!1;constructor(templateRef){this.templateRef=templateRef}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef}];static propDecorators={after:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:["zacAfter"]}],focusable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}]}};AfterDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"zacAfter,[zacAfter]",standalone:!0})],AfterDirective)},"./projects/zac-ng-lib/src/lib/shared/widget/on-init.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>OnInitDirective});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let OnInitDirective=class OnInitDirective{elementRef;zacOnInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;zacAfterViewInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;zacAfterContentInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;constructor(elementRef){this.elementRef=elementRef}ngOnInit(){this.zacOnInit.emit(this.elementRef.nativeElement)}ngAfterViewInit(){this.zacAfterViewInit.emit(this.elementRef.nativeElement)}ngAfterContentInit(){this.zacAfterContentInit.emit(this.elementRef.nativeElement)}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef}];static propDecorators={zacOnInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}],zacAfterViewInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}],zacAfterContentInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}]}};OnInitDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"[zacOnInit],[zacAfterViewInit],[zacAfterContentInit]",standalone:!0})],OnInitDirective)}}]);