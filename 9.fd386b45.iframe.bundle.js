"use strict";(self.webpackChunkzac_ng_lib=self.webpackChunkzac_ng_lib||[]).push([[9],{"./.storybook/common/CVA.md":module=>{module.exports='<details>\n<summary>\nÉlément de formulaire de type ControlValueAccessor\n</summary>\n\nCe composant implémente l’interface [ControlValueAccessor](https://angular.io/api/forms/ControlValueAccessor#description) et hérite de l’implémentation de base FocusgroupAccessorBase fournie dans cette librairie, ce qui lui permet :\n\n- D’être utilisé comme n’importe quel autre contrôle natif\n  - En lui adjoignant des directives de validation (**required**, **min**, …)\n  - En le liant à une propriété d’un modèle en utilisant indifféremment les 2 méthodes Angular classiques\n    - Via **[(ngModel)]** de [FormsModule](https://angular.io/api/forms/FormsModule)\n    - Via **[formControlName]** de [ReactiveFormsModule](https://angular.io/api/forms/ReactiveFormsModule)\n  - En pouvant choisir parmi les 3 méthodes de mise à jour du modèle (**ngModelOptions** = `"change"` par défaut, ou `"blur"` ou `"submit"`)\n</details>\n\n<details> \n<summary>Accessibilité</summary>\n**Attention :** à partir de la zac-ng-lib v19, il **faut** utiliser ce composant au sein d’un `zac-form-field` pour que label et message d’erreur soient correctement associés au contrôle pour l’accessibilité.\n</details>\n'},"./.storybook/common/IntroStory.md":module=>{module.exports="<br/>\n## Exemple, API & Usage\n"},"./projects/zac-ng-lib/src/lib/form/form-field/form-field.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>FormFieldComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var form_field_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/form-field.component.scss?ngResource"),form_field_componentngResource_default=__webpack_require__.n(form_field_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),zac_label_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/zac-label/zac-label.component.ts"),errors_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/errors/errors.directive.ts"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),error_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/error/error.component.ts"),form_field=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/form-field.ts"),zac_label_for_input_service=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/service/zac-label-for-input.service.ts"),platform_browser=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/platform-browser.mjs");let AbstractSanitizerPipe=class AbstractSanitizerPipe{domSanitizer;constructor(domSanitizer){this.domSanitizer=domSanitizer}static ctorParameters=()=>[{type:platform_browser.DomSanitizer}]};AbstractSanitizerPipe=(0,tslib_es6.Cg)([(0,core.Injectable)()],AbstractSanitizerPipe);let SafeHtmlPipe=class SafeHtmlPipe extends AbstractSanitizerPipe{transform(html){return this.domSanitizer.bypassSecurityTrustHtml(html)}};SafeHtmlPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeHtml",standalone:!0})],SafeHtmlPipe);let SafeStylePipe=class SafeStylePipe extends AbstractSanitizerPipe{transform(style){return this.domSanitizer.bypassSecurityTrustStyle(style)}};SafeStylePipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeStyle",standalone:!0})],SafeStylePipe);let SafeScriptPipe=class SafeScriptPipe extends AbstractSanitizerPipe{transform(script){return this.domSanitizer.bypassSecurityTrustScript(script)}};SafeScriptPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeScript",standalone:!0})],SafeScriptPipe);let SafeUrlPipe=class SafeUrlPipe extends AbstractSanitizerPipe{transform(url){return this.domSanitizer.bypassSecurityTrustUrl(url)}};SafeUrlPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeUrl",standalone:!0})],SafeUrlPipe);let SafeResourceUrlPipe=class SafeResourceUrlPipe extends AbstractSanitizerPipe{transform(resourceUrl){return this.domSanitizer.bypassSecurityTrustResourceUrl(resourceUrl)}};SafeResourceUrlPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeResourceUrl",standalone:!0})],SafeResourceUrlPipe);var abstract_form_field_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/abstract-form-field.component.ts");let FormFieldComponent=class FormFieldComponent extends abstract_form_field_component.W{set label(value){this._stringLabel=value}errorPosition="under";set hint(value){this._hint=value}get hint(){return this._hint}hintPosition="under";constructor(elementRef,render,labelForInputService,errorsDirective){super(elementRef,render,labelForInputService,errorsDirective)}static ctorParameters=()=>[{type:core.ElementRef},{type:core.Renderer2},{type:zac_label_for_input_service.$},{type:errors_directive.R,decorators:[{type:core.Optional}]}];static propDecorators={label:[{type:core.Input}],errorPosition:[{type:core.Input}],hint:[{type:core.Input}],hintPosition:[{type:core.Input}]}};FormFieldComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-form-field",template:'<ng-container\n  *ngIf="projectedNgControl && $readOnlyStateApplied() !== undefined"\n>\n  @let isRoleGroup = false;\n  <ng-container *ngIf="!isRoleGroup">\n    \x3c!-- On est ici dans un zac qui ne contient qu\'un seul élément de form html --\x3e\n    \x3c!-- On utilise un zac-label mais seulement si on ne l\'a pas projeté --\x3e\n\n    <ng-container *ngTemplateOutlet="zacLabelTemplate" />\n\n    <div\n      id="{{ ngControlElement?.id }}-hint"\n      class="{{ hintClasses }}"\n      *ngIf="!$readonly() && hint && \'above\' === hintPosition"\n    >\n      {{ hint }}\n    </div>\n\n    <ng-container *ngIf="\'above\' === errorPosition">\n      <ng-container *ngTemplateOutlet="errorTemplate"></ng-container>\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet="formElementTemplate"></ng-container>\n\n    <div\n      id="{{ ngControlElement?.id }}-hint"\n      class="{{ hintClasses }}"\n      *ngIf="!$readonly() && hint && \'under\' === hintPosition"\n    >\n      {{ hint }}\n    </div>\n\n    <ng-container *ngIf="\'under\' === errorPosition">\n      <ng-container *ngTemplateOutlet="errorTemplate"></ng-container>\n    </ng-container>\n  </ng-container>\n\n  \x3c!-- ce code est une possibilité qui n\'est plus activé mais est gardé pour référence --\x3e\n  <ng-container *ngIf="isRoleGroup" #zacRoleGroupTemplate>\n    \x3c!-- On est ici dans un zac qui contient plusieurs éléments de form html --\x3e\n    \x3c!-- On va wrapper l\'élément de formulaire projeté dans un fieldset legend  --\x3e\n    \x3c!-- uniquement si on a pa projeté aussi un zac-label  --\x3e\n    <fieldset>\n      <legend *ngIf="stringLabel && !projectedLabelComponent" class="label">\n        {{ stringLabel }}\n        <ng-container *ngTemplateOutlet="requiredOrOptionalTemplate"/>\n      </legend>\n      <legend *ngIf="projectedLabelComponent" class="label">\n        <ng-container *ngTemplateOutlet="zacLabelTemplate" />\n      </legend>\n\n      <div\n        id="{{ ngControlElement?.id }}-hint"\n        class="{{ hintClasses }}"\n        *ngIf="!$readonly() && hint && \'above\' === hintPosition"\n      >\n        {{ hint }}\n      </div>\n\n      <ng-container *ngIf="\'above\' === errorPosition">\n        <ng-container *ngTemplateOutlet="errorTemplate"></ng-container>\n      </ng-container>\n\n      <ng-container *ngTemplateOutlet="formElementTemplate"></ng-container>\n\n      <div\n        id="{{ ngControlElement?.id }}-hint"\n        class="{{ hintClasses }}"\n        *ngIf="!$readonly() && hint && \'under\' === hintPosition"\n      >\n        {{ hint }}\n      </div>\n\n      <ng-container *ngIf="\'under\' === errorPosition">\n        <ng-container *ngTemplateOutlet="errorTemplate"></ng-container>\n      </ng-container>\n\n      \x3c!--  @deprecated depuis qu\'on gère avec fieldset + legend\n      <ng-container\n        (zacAfterViewInit)="afterRoleGroupTemplateInit()"\n      ></ng-container>\n      --\x3e\n    </fieldset>\n  </ng-container>\n\n  <ng-template #zacLabelTemplate>\n    <ng-container *ngIf="stringLabel && !projectedLabelComponent">\n      <zac-label #generatedZacLabel for="{{ contentControlId }}"\n        >{{ stringLabel }}\n        <ng-container *ngTemplateOutlet="requiredOrOptionalTemplate"/>\n      </zac-label>\n    </ng-container>\n\n    <ng-container *ngIf="projectedLabelComponent">\n      <ng-content select="zac-label" />\n    </ng-container>\n  </ng-template>\n\n  <ng-template #formElementTemplate>\n    \x3c!-- Ici sera projeté le FormControl contenu --\x3e\n    <ng-content select=":not(zac-label):not(zac-error)"></ng-content>\n  </ng-template>\n\n  <ng-template #errorTemplate>\n    <ng-container *ngIf="!$readonly() && errorsDirective">\n      <ng-container *ngIf="projectedErrorComponent">\n        <ng-content select="zac-error" />\n      </ng-container>\n      <ng-container *ngIf="!projectedErrorComponent">\n        <zac-error controlName="{{ projectedNgControl.name }}"></zac-error>\n      </ng-container>\n    </ng-container>\n  </ng-template>\n\n  <ng-template #requiredOrOptionalTemplate>\n    @if (\n      $requiredOrOptionalClause();\n      as roInfo\n      ) {\n      <div class="required-or-optional" [innerHTML]="roInfo | safeHtml"></div>\n    }\n  </ng-template>\n</ng-container>\n',imports:[common_module_Dx7dWex5.bT,zac_label_component.w,common_module_Dx7dWex5.T3,SafeHtmlPipe,(0,core.forwardRef)((()=>error_component.A))],providers:[{provide:form_field.k,useExisting:(0,core.forwardRef)((()=>FormFieldComponent))}],encapsulation:core.ViewEncapsulation.None,changeDetection:core.ChangeDetectionStrategy.OnPush,host:{class:"zac-form-field"},styles:[form_field_componentngResource_default()]})],FormFieldComponent)},"./projects/zac-ng-lib/src/lib/shared/service/focus-tracker/focus-tracker.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>FocusTrackerService});var FocusTrackerService_1,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");class AbstractFocusTrackerService{isActiveElementIn(element){const active=this.getActiveElement(),isBody="BODY"===active?.tagName,isInElement=element.contains(active);return isBody||isInElement}}class FocusTrackerFocusInImpl extends AbstractFocusTrackerService{focusInTargetElement;_previousActiveElement;constructor(){super(),this.createFocusinEventListener()}getActiveElement(){return this.focusInTargetElement??null}createFocusinEventListener(){document.addEventListener("focusin",(event=>{this.focusInTargetElement=event.target})),document.addEventListener("focusout",(event=>{this._previousActiveElement=this.focusInTargetElement,this.focusInTargetElement=void 0}))}getPreviousActiveElement(){return this._previousActiveElement??null}}let FocusTrackerService=class FocusTrackerService extends AbstractFocusTrackerService{static{FocusTrackerService_1=this}static instance=FocusTrackerService_1.createNewInstance();static getInstance(){return FocusTrackerService_1.instance}static isDocumentActiveElementImplemented(){return null!==document.activeElement&&void 0!==document.activeElement}static createNewInstance(){return new FocusTrackerFocusInImpl}getActiveElement(){return FocusTrackerService_1.getInstance().getActiveElement()}getPreviousActiveElement(){return FocusTrackerService_1.getInstance().getPreviousActiveElement()}};FocusTrackerService=FocusTrackerService_1=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],FocusTrackerService)},"./projects/zac-ng-lib/src/lib/shared/util/coercions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function coerceEntries(value){return null==value||Array.isArray(value)?function coerceChoiceList(choix){return choix?.map((c=>Array.isArray(c)?void 0!==c[1]?c:[c[0],c[0]]:[c,c]))??[]}(value):"object"==typeof value?Object.entries(value):[value]}__webpack_require__.d(__webpack_exports__,{A:()=>coerceEntries})},"./projects/zac-ng-lib/src/lib/shared/widget/focusgroup-accessor-base.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>FocusgroupAccessorBase});var FocusgroupAccessorBase_1,D_gitrepo_zac_ng_lib_19_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_value_accessor_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/value-accessor-base.ts"),_util_event_queue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/event-queue.ts"),_service_focus_tracker_focus_tracker_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/service/focus-tracker/focus-tracker.service.ts"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/first.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/timeout.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/boolean-property-DaaVhX5A.mjs");let FocusgroupAccessorBase=class FocusgroupAccessorBase extends _value_accessor_base__WEBPACK_IMPORTED_MODULE_0__.k{static{FocusgroupAccessorBase_1=this}internalFocused=!1;focusOutEmitted=!1;focusTracker;_disabled=!1;set disabled(value){this._disabled=(0,_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_1__.c)(value),this.setDisabledState(this._disabled)}get disabled(){return this._disabled??!1}blurValue=new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter;valueUnchange=new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter;constructor(injector,elementRef){super(injector,elementRef),this.focusTracker=_service_focus_tracker_focus_tracker_service__WEBPACK_IMPORTED_MODULE_3__.g.getInstance(),this.getNativeElement().classList.add("focusgroup"),this.getNativeElement().focus=this._setFocus.bind(this)}onFocusOut(element,event){var _this=this;return(0,D_gitrepo_zac_ng_lib_19_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.A)((function*(){element!==_this.getNativeElement()&&(event.stopImmediatePropagation(),event.preventDefault(),yield _this.skipTurnToAllowFocusGainElsewhere(),_this.changeStateAndFireEventsIfThisComponentLosesFocus())}))()}onFocusIn(element,event){var _this2=this;return(0,D_gitrepo_zac_ng_lib_19_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.A)((function*(){yield _util_event_queue__WEBPACK_IMPORTED_MODULE_5__.C.skipTurn(),_this2.focusOutEmitted=!1,_this2.focused=!0}))()}onClick(element,event){this.testValueChangeAndFireValueUnchangeIfNot()}onSpace(element,event){this.testValueChangeAndFireValueUnchangeIfNot()}get focused(){return this.internalFocused}set focused(value){value!==this.internalFocused&&(this.internalFocused=value,this.addOrRemoveCssClassFocused(value).then())}onComponentFocusLost(){}fireEventsOnFocusLost=()=>{this.touch(),this.focusOutEmitted||(this.focusOutEmitted=!0,FocusgroupAccessorBase_1.fireEvent(this.getNativeElement(),"focusout",!0),FocusgroupAccessorBase_1.fireEvent(this.getNativeElement(),"blur",!1),this.blurValue.emit(this.innerValue)),this.onComponentFocusLost()};changeStateAndFireEventsIfThisComponentLosesFocus(){this.focused=!1,("BODY"===document.activeElement?.tagName||this.isThisComponentLosesFocus())&&this.fireEventsOnFocusLost()}testValueChangeAndFireValueUnchangeIfNot(){this.valueChange.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.$)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.w)(100),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.W)((error=>(console.debug("valueUnchange ",this.innerValue),this.valueUnchange.emit(this.innerValue||void 0),(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(null))))).subscribe()}addOrRemoveCssClassFocused(value){var _this3=this;return(0,D_gitrepo_zac_ng_lib_19_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.A)((function*(){yield _util_event_queue__WEBPACK_IMPORTED_MODULE_5__.C.skipTurn(),value?_this3.getNativeElement().classList.add("focused"):_this3.getNativeElement().classList.remove("focused")}))()}_setFocus(){this.focus()}isThisComponentLosesFocus(){const activeElement=this.focusTracker.getActiveElement();return activeElement&&!this.getNativeElement().contains(activeElement)||!1}skipTurnToAllowFocusGainElsewhere(){return _util_event_queue__WEBPACK_IMPORTED_MODULE_5__.C.skipTurn()}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injector},{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef}];static propDecorators={disabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input}],valueUnchange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Output}],onFocusOut:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.HostListener,args:["focusout",["$event.target","$event"]]}],onFocusIn:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.HostListener,args:["focusin",["$event.target","$event"]]}],onClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.HostListener,args:["click",["$event.target","$event"]]}],onSpace:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.HostListener,args:["keydown.space",["$event.target","$event"]]}]}};FocusgroupAccessorBase=FocusgroupAccessorBase_1=(0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.Directive)({selector:"FocusgroupAccessorBase",standalone:!1})],FocusgroupAccessorBase)}}]);