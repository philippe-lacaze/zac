import{a as h,b as o,c as A}from "./chunk-62VNOMAI.js";import{$b as S,Db as E,Lc as g,Mc as x,Nc as b,Qb as e,Ra as d,Sb as f,Va as r,Yc as C,ab as u,hc as a,ic as p,vb as t,wb as n,xb as v}from "./chunk-U63Q73KB.js";import"./chunk-ISTSDNHA.js";var l=class s{constructor(m, i){this.httpClient=m;this.messageHolder=i}$personne;ngOnInit(){this.messageHolder.startRedirectingLog()}ngOnDestroy(){this.messageHolder.stopRedirectingLog()}getPersonne(){return console.debug("this.httpClient.get<Personne>('/api/personne')"),this.httpClient.get("/api/personne")}onClickRead(){this.$personne=this.getPersonne()}static \u0275fac=function(i){return new(i||s)(r(C),r(o))};static \u0275cmp=u({type:s,selectors:[["app-demo-api-interceptor"]],features:[S([{provide:o,useValue:new o(["ApiInterceptorService","ConfigLoaderService","PersonneService","AbstractHttpStore"])}])],decls:63,vars:5,consts:[[1,"demo-title-section"],[1,"demo-section_reverse"],[1,"demo-section"],["src","components/DemoApiInterceptorComponent.html#source"],["type","button",1,"button","--button_primary","tooltip",3,"click"],[1,"tooltip-text","--top"],["href","http://portailg2.agora.msanet:8081/nsa/current/notes/pratiques-frontend.html#configuration-du-frontend","target","_blank"]],template:function(i, c){i&1&&(t(0,"main")(1,"h1",0),e(2,"D\xE9mo d'usage de ApiInterceptorService"),n(),t(3,"div",1)(4,"section",2)(5,"h2"),e(6,"D\xE9mo"),n(),t(7,"app-source",3),v(8,"app-console-panel"),t(9,"nav")(10,"button",4),E("click",function(){return c.onClickRead()}),e(11," onClickRead() "),t(12,"span",5),e(13,"obtient la personne via une requ\xEAte HttpClient"),n()()(),t(14,"p"),e(15),a(16,"async"),a(17,"json"),n()()(),t(18,"section",2)(19,"h2"),e(20,"Intention"),n(),t(21,"p"),e(22,"En "),t(23,"b"),e(24,"NSA"),n(),e(25," ("),t(26,"b"),e(27,"pas"),n(),e(28," en G2/TAT-1) l'acc\xE8s du frontend au backend via httpClient implique des containers docker diff\xE9rents et la backendUrl devient variable par environnement, tel qu'expliqu\xE9 dans la documentation NSA "),t(29,"a",6),e(30," Pratiques de d\xE9veloppent Frontend "),n(),e(31," qui donne pour ce faire du code a code a copier/coller dans chaque projet. "),n(),t(32,"p"),e(33," Le module ZacApiIntercepteur module factorise donc en son sein le code des 2 services n\xE9cessaires "),t(34,"code")(35,"b"),e(36,"ConfigLoaderService"),n()(),e(37," et "),t(38,"code")(39,"b"),e(40,"ApiInterceptorService"),n()()(),t(41,"p"),e(42,"Il suffit d'importer le NgModule "),t(43,"code")(44,"b"),e(45,"ZacApiIntercepteurModule"),n()(),e(46," au niveau de votre AppModule ou (angular 15+ standalone) dans votre "),t(47,"code"),e(48,"app.configuration-zac.ts"),n(),e(49," via la fonction "),t(50,"code"),e(51,"importProvidersFrom"),n(),e(52," pour que les 2 services soient provid\xE9s et l'intercepteur positionn\xE9."),n(),t(53,"p"),e(54,"Comme mentionn\xE9 dans la doc de NSA il est n\xE9cessaire d'avoir d\xE9clar\xE9 un fichier au sein de chaque projet dans src/assets/config/config.json porteur de la valorisation des param\xE8tres en local, qui seront overrid\xE9s lors du d\xE9ploiement."),n(),t(55,"p"),e(56,"Dans la d\xE9mo ci-dessous, comme on est en local, la valeur de backendUrl reste la m\xEAme."),n(),t(57,"p"),e(58,"Comme on peut le voir chaque appel httpCLient est intercept\xE9 et on va remplacer l'url initial en lui ajoutant en pr\xE9fixe la valeur de backendUrl, qui aura \xE9t\xE9 r\xE9cup\xE9r\xE9e au pr\xE9alable (et cach\xE9e) par le "),t(59,"code")(60,"b"),e(61,"ConfigLoaderService"),n()(),e(62,". "),n()()()()),i&2&&(d(15),f("Personne = ",p(17,3,p(16,1,c.$personne)),""))},dependencies:[b,g,x,A,h],encapsulation:2})};export{l as default};
