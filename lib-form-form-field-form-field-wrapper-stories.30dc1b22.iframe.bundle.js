(self.webpackChunkzac_ng_lib=self.webpackChunkzac_ng_lib||[]).push([[97],{"./projects/zac-ng-lib/src/lib/form/date/date/date.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/zac-ng-lib/src/lib/form/date/date/date.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>DateComponent});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var date_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/form/date/date/date.component.scss?ngResource"),date_componentngResource_default=__webpack_require__.n(date_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),component_util=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/component-util.ts"),event_queue=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/event-queue.ts"),value_accessor_base=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/value-accessor-base.ts"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),date_util=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/date-util.ts");let DateComponent=class DateComponent extends value_accessor_base.k{_preferredValueType=String;_exempleLabel;isExempleLabelEnabled=!1;set preferredValueType(value){if(value===Date||value instanceof Date)this._preferredValueType=Date;else if("string"==typeof value){const v=value?.toLocaleLowerCase();v&&(this._preferredValueType="date"===v?Date:String)}}set exempleLabel(exempleLabel){this._exempleLabel=exempleLabel,this.initializeExempleLabel()}get exempleLabel(){return this._exempleLabel}format=(0,core.input)(date_util.C.iso);isDateNaissance=(0,core.input)(!1,{transform:core.booleanAttribute});innerValueType=(0,core.computed)((()=>this.innerValue?"string"==typeof this.innerValue?String:Date:this._preferredValueType));autocompleteValue=(0,core.computed)((()=>this.isDateNaissance()?"bday":null));innerValueAsIsoString;innerValueAsFrString;invalidDate=!1;inputElementRef;constructor(injector,elementRef){super(injector,elementRef),this.getNativeElement().focus=this.focus.bind(this),this.initializeExempleLabel()}determineIfRoleGroup(isReadonlyState){return!1}onChange(event){const value=event.target.value;if(value)if(this.innerValueType()===Date)this.innerValue=new Date(value);else if(this.format()===date_util.C.iso)this.innerValue=value;else{const[yyyy,mm,dd]=value.split("-");this.innerValue=`${dd}/${mm}/${yyyy}`}else event.target.validationMessage?this.innerValue=new Date("invalid"):this.innerValue=void 0}focus(){this.inputElementRef?.nativeElement.focus()}onFocusOut(element,event){var _this=this;return(0,asyncToGenerator.A)((function*(){element!==_this.getNativeElement()&&(event.stopImmediatePropagation(),event.preventDefault(),yield event_queue.C.skipTurn(),component_util.kN.fireEvent(_this.getNativeElement(),"focusout",!0),component_util.kN.fireEvent(_this.getNativeElement(),"blur",!1))}))()}whenOutterValueChange(value){super.whenOutterValueChange(value),this.determineInnerValueAsIsoAndFrString()}whenInnerValueChange(value){super.whenInnerValueChange(value),this.determineInnerValueAsIsoAndFrString()}validate(control){return control?.value&&date_util.r.isInvalidDate(control.value)?{date10:{actual:control.value}}:null}initializeExempleLabel(){this.isExempleLabelEnabled=null!==this._exempleLabel,this.isExempleLabelEnabled?(this.getNativeElement().classList.add("--with_exemple"),this.exempleLabel||(this._exempleLabel="21/06/2026")):this.getNativeElement().classList.remove("--with_exemple")}determineInnerValueAsIsoAndFrString(){if(null!=this.innerValue)try{this.innerValueType()===Date?(this.innerValueAsIsoString=this.innerValue.toISOString()?.substring(0,10),this.innerValueAsFrString=date_util.r.dateIsoToDate10(this.innerValueAsIsoString)):this.format()===date_util.C.iso?(this.innerValueAsIsoString=this.innerValue,this.innerValueAsFrString=date_util.r.dateIsoToDate10(this.innerValue)):(this.innerValueAsFrString=this.innerValue,this.innerValueAsIsoString=date_util.r.date10ToDateIso(this.innerValue))}catch(e){console.error(e),this.innerValueAsIsoString=void 0}}get readonlyValue(){return this.innerValueAsIsoString??""}static ctorParameters=()=>[{type:core.Injector},{type:core.ElementRef}];static propDecorators={preferredValueType:[{type:core.Input}],exempleLabel:[{type:core.Input}],format:[{type:core.Input,args:[{isSignal:!0,alias:"format",required:!1,transform:void 0}]}],isDateNaissance:[{type:core.Input,args:[{isSignal:!0,alias:"isDateNaissance",required:!1,transform:void 0}]}],inputElementRef:[{type:core.ViewChild,args:["input"]}],onFocusOut:[{type:core.HostListener,args:["focusout",["$event.target","$event"]]}]}};DateComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-date",template:'<ng-container *ngIf="!$isReadonlyState() else caseReadonly">\n  <input type="date" #input\n         [value]="innerValueAsIsoString"\n         (blur)="onChange($event)"\n         [attr.autocomplete]="autocompleteValue()"\n  >\n  <p *ngIf="isExempleLabelEnabled" [attr.id]="id + \'-exemple\'" class="exemple">\n    ex. {{ exempleLabel }}\n  </p>\n</ng-container>\n<ng-template #caseReadonly>\n  <input readonly [value]="readonlyValue">\n</ng-template>\n',encapsulation:core.ViewEncapsulation.None,standalone:!0,imports:[common_module_Dx7dWex5.bT],providers:[{provide:fesm2022_forms.kq,useExisting:DateComponent,multi:!0},{provide:fesm2022_forms.cz,useExisting:DateComponent,multi:!0}],host:{class:"zac-date"},changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[date_componentngResource_default()]})],DateComponent)},"./projects/zac-ng-lib/src/lib/form/form-field/form-field-wrapper.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExempleNominal:()=>ExempleNominal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>form_field_wrapper_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),form_field_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/form-field.component.scss?ngResource"),form_field_componentngResource_default=__webpack_require__.n(form_field_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),form_field=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/form-field.ts"),abstract_form_field_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/abstract-form-field.component.ts");let FormFieldWrapperComponent=class FormFieldWrapperComponent extends abstract_form_field_component.W{connectLabelToBoundElement(labelComponent){if(this.projectedNgControlRef)return this.labelForInputService.tryToConnectNonNativeFormControlElementToZacLabelElement(this.projectedNgControlRef.nativeElement,labelComponent.elementRef.nativeElement,!1)}};FormFieldWrapperComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-form-field-wrapper",standalone:!0,template:"<ng-content></ng-content>",providers:[{provide:form_field.k,useExisting:(0,core.forwardRef)((()=>FormFieldWrapperComponent))}],encapsulation:core.ViewEncapsulation.None,changeDetection:core.ChangeDetectionStrategy.OnPush,host:{class:"zac-form-field-wrapper zac-form-field zac-form-field--generated"},styles:[form_field_componentngResource_default()]})],FormFieldWrapperComponent);var control_bar_component=__webpack_require__("./projects/zac-ng-lib/src/lib/button/control-bar/control-bar.component.ts"),errors_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/errors/errors.directive.ts"),zac_label_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/zac-label/zac-label.component.ts"),textarea_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/textarea/textarea.component.ts"),error_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/error/error.component.ts"),date3_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/date/date3.component.ts"),date_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/date/date/date.component.ts"),display_error_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/display-error/display-error.directive.ts"),custom_message_and_focus=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/custom-message-and-focus.ts");const form_field_wrapper_stories={title:"Formulaire/FormFieldWrapper",component:FormFieldWrapperComponent,tags:["docs"],decorators:[(0,dist.moduleMetadata)({imports:[fesm2022_forms.YN,fesm2022_forms.X1,FormFieldWrapperComponent,control_bar_component.W,errors_directive.R,error_component.A,zac_label_component.w,textarea_component.Q]})],argTypes:{model:{control:"object",table:{disable:!0}},readonly:{control:"boolean",description:"Mettre true sur <b>zac-form-field-wrapper</b> pour forcer le champ en readonly."}}},ExempleNominal={name:"Utilisation de zac-form-field-wrapper",args:{model:{},readonly:!1},parameters:{docs:{description:{story:"Illustration de l'utilisation de <zac-form-field-wrapper> pour encapsuler deux champs de date avec erreurs regroupées au dessus. ```typescript  ```"},source:{type:"auto",language:"html"}}},render:args=>({props:{...args,ngSubmit:form=>{console.log("ngSubmit form",form),form.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0})},xFieldValidator:new display_error_directive.dH({name:"xFieldValidator",validatorFn:control=>{const dateDebutControl=control.get("dateDebut"),dateFinControl=control.get("dateFin");if(dateDebutControl&&dateFinControl){const dateDebut=new Date(dateDebutControl.value),dateFin=new Date(dateFinControl.value);if(dateDebut&&dateFin&&dateDebut>dateFin)return{xFieldValidator:new custom_message_and_focus.K("La date de début doit être antérieure à la date de fin","dateDebut",["dateDebut","dateFin"])}}return null}})},moduleMetadata:{imports:[fesm2022_forms.YN,fesm2022_forms.X1,FormFieldWrapperComponent,zac_label_component.w,textarea_component.Q,control_bar_component.W,error_component.A,date3_component.b,date_component.g]},template:'\n\x3c!-- HTML --\x3e\n<form zacErrors (ngSubmit)="ngSubmit(form)" #form="ngForm">\n  \x3c!-- Regroupement des 2 champs date --\x3e\n  <fieldset>\n    \x3c!-- Titre du fieldset --\x3e\n    <legend id="rechercher-declaration-legend">\n      <p class="zac-text-style:text-M-bold">Rechercher une déclaration</p>\n      <p class="zac-text-style:text-S-regular zac-text-color:neutral-500">Sélectionnez une période. la recherche se fait par date d\'accident</p>\n    </legend>\n    \x3c!-- Erreurs globales au fieldset --\x3e\n    <zac-error id="error-dateDebut" [controlName]="\'dateDebut\'" [errorMessages]="{required: \'La date de début est obligatoire\'}" />\n    <zac-error id="error-dateFin" [controlName]="\'dateFin\'" [errorMessages]="{required: \'La date de fin est obligatoire\'}" />\n    <zac-error id="error-dates" [xFieldValidator]="xFieldValidator"/>\n    <br/>\n    \x3c!-- Conteneur en grid pour les 2 champs date --\x3e\n    <div class="zac-grid-container">\n      <zac-form-field-wrapper\n        [readonly]="readonly"\n        class="zac-grid-col:start"\n      >\n        <zac-label>Date début</zac-label>\n\n        \x3c!-- Utilisation de zac-date en précisant les liens aria vers le legend et les zac-error externes --\x3e\n        <zac-date\n          id="dateDebut"\n          name="dateDebut"\n          required\n          preferredValueType="Date"\n          [(ngModel)]="model.dateDebut"\n          [attr.aria-describedby]="\'rechercher-declaration-legend dateDebut-exemple error-dateDebut error-dates\'"\n        />\n      </zac-form-field-wrapper>\n\n      \x3c!-- Flèche entre les 2 champs --\x3e\n      <div class="zac-grid-col:1" style="margin-top: 2rem; margin-left:1rem">&#10140;</div>\n\n      <zac-form-field-wrapper\n        [readonly]="readonly"\n        class="zac-grid-col:end"\n      >\n        <zac-label>Date fin</zac-label>\n\n        \x3c!-- Utilisation de zac-date en précisant les liens aria vers le legend et les zac-error externes --\x3e\n        <zac-date\n          id="dateFin"\n          name="dateFin"\n          required\n          preferredValueType="Date"\n          [(ngModel)]="model.dateFin"\n          [attr.aria-describedby]="\'rechercher-declaration-legend dateFin-exemple error-dateFin error-dates\'"\n        />\n      </zac-form-field-wrapper>\n      </div>\n    </fieldset>\n    <zac-control-bar/>\n</form>\n<p style="margin-top: .5rem; font-size: .875rem; color: #666;">Date début : {{ model.dateDebut }}</p>\n<p style="margin-top: .5rem; font-size: .875rem; color: #666;">Date fin : {{ model.dateFin }}</p>\n\n\x3c!-- TypeScript (controleur angular) --\x3e\n    <script>\n/**\n * Validateur personnalisé pour vérifier que la date de début est antérieure à la date de fin.\n */\nxFieldValidator: ValidatorConfig = new ValidatorConfig({\n  name: \'xFieldValidator\',\n  validatorFn: (control: AbstractControl) => {\n    const dateDebutControl = control.get(\'dateDebut\');\n    const dateFinControl = control.get(\'dateFin\');\n    if (dateDebutControl && dateFinControl) {\n      const dateDebut = new Date(dateDebutControl.value);\n      const dateFin = new Date(dateFinControl.value);\n      if (dateDebut && dateFin && dateDebut > dateFin) {\n        return {\n          xFieldValidator: new CustomMessageAndFocus(\n            \'La date de début doit être antérieure à la date de fin\',\n            \'dateDebut\',\n            [\'dateDebut\', \'dateFin\']\n          )\n        };\n      }\n    }\n    return null;\n  }\n});\n<\/script>\n\n'})},__namedExportsOrder=["ExempleNominal"];ExempleNominal.parameters={...ExempleNominal.parameters,docs:{...ExempleNominal.parameters?.docs,source:{originalSource:'{\n  name: `Utilisation de zac-form-field-wrapper`,\n  args: {\n    model: {},\n    readonly: false\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: "Illustration de l\'utilisation de <zac-form-field-wrapper> pour encapsuler" + " deux champs de date avec erreurs regroupées au dessus." + " ```typescript" + " " + " ```"\n      },\n      source: {\n        type: \'auto\',\n        language: \'html\'\n      }\n    }\n  },\n  render: args => ({\n    props: {\n      ...args,\n      ngSubmit: (form: NgForm) => {\n        console.log(\'ngSubmit form\', form);\n        form.form.updateValueAndValidity({\n          onlySelf: false,\n          emitEvent: true\n        });\n      },\n      xFieldValidator: new ValidatorConfig({\n        name: \'xFieldValidator\',\n        validatorFn: (control: AbstractControl) => {\n          const dateDebutControl = control.get(\'dateDebut\');\n          const dateFinControl = control.get(\'dateFin\');\n          if (dateDebutControl && dateFinControl) {\n            const dateDebut = new Date(dateDebutControl.value);\n            const dateFin = new Date(dateFinControl.value);\n            if (dateDebut && dateFin && dateDebut > dateFin) {\n              return {\n                xFieldValidator: new CustomMessageAndFocus(\'La date de début doit être antérieure à la date de fin\', \'dateDebut\', [\'dateDebut\', \'dateFin\'])\n              };\n            }\n          }\n          return null;\n        }\n      })\n    },\n    moduleMetadata: {\n      imports: [FormsModule, ReactiveFormsModule, FormFieldWrapperComponent, ZacLabelComponent, TextareaComponent, ControlBarComponent, ErrorComponent, Date3Component, DateComponent]\n    },\n    template: `\n\x3c!-- HTML --\x3e\n<form zacErrors (ngSubmit)="ngSubmit(form)" #form="ngForm">\n  \x3c!-- Regroupement des 2 champs date --\x3e\n  <fieldset>\n    \x3c!-- Titre du fieldset --\x3e\n    <legend id="rechercher-declaration-legend">\n      <p class="zac-text-style:text-M-bold">Rechercher une déclaration</p>\n      <p class="zac-text-style:text-S-regular zac-text-color:neutral-500">Sélectionnez une période. la recherche se fait par date d\'accident</p>\n    </legend>\n    \x3c!-- Erreurs globales au fieldset --\x3e\n    <zac-error id="error-dateDebut" [controlName]="\'dateDebut\'" [errorMessages]="{required: \'La date de début est obligatoire\'}" />\n    <zac-error id="error-dateFin" [controlName]="\'dateFin\'" [errorMessages]="{required: \'La date de fin est obligatoire\'}" />\n    <zac-error id="error-dates" [xFieldValidator]="xFieldValidator"/>\n    <br/>\n    \x3c!-- Conteneur en grid pour les 2 champs date --\x3e\n    <div class="zac-grid-container">\n      <zac-form-field-wrapper\n        [readonly]="readonly"\n        class="zac-grid-col:start"\n      >\n        <zac-label>Date début</zac-label>\n\n        \x3c!-- Utilisation de zac-date en précisant les liens aria vers le legend et les zac-error externes --\x3e\n        <zac-date\n          id="dateDebut"\n          name="dateDebut"\n          required\n          preferredValueType="Date"\n          [(ngModel)]="model.dateDebut"\n          [attr.aria-describedby]="\'rechercher-declaration-legend dateDebut-exemple error-dateDebut error-dates\'"\n        />\n      </zac-form-field-wrapper>\n\n      \x3c!-- Flèche entre les 2 champs --\x3e\n      <div class="zac-grid-col:1" style="margin-top: 2rem; margin-left:1rem">&#10140;</div>\n\n      <zac-form-field-wrapper\n        [readonly]="readonly"\n        class="zac-grid-col:end"\n      >\n        <zac-label>Date fin</zac-label>\n\n        \x3c!-- Utilisation de zac-date en précisant les liens aria vers le legend et les zac-error externes --\x3e\n        <zac-date\n          id="dateFin"\n          name="dateFin"\n          required\n          preferredValueType="Date"\n          [(ngModel)]="model.dateFin"\n          [attr.aria-describedby]="\'rechercher-declaration-legend dateFin-exemple error-dateFin error-dates\'"\n        />\n      </zac-form-field-wrapper>\n      </div>\n    </fieldset>\n    <zac-control-bar/>\n</form>\n<p style="margin-top: .5rem; font-size: .875rem; color: #666;">Date début : {{ model.dateDebut }}</p>\n<p style="margin-top: .5rem; font-size: .875rem; color: #666;">Date fin : {{ model.dateFin }}</p>\n\n\x3c!-- TypeScript (controleur angular) --\x3e\n    <script>\n/**\n * Validateur personnalisé pour vérifier que la date de début est antérieure à la date de fin.\n */\nxFieldValidator: ValidatorConfig = new ValidatorConfig({\n  name: \'xFieldValidator\',\n  validatorFn: (control: AbstractControl) => {\n    const dateDebutControl = control.get(\'dateDebut\');\n    const dateFinControl = control.get(\'dateFin\');\n    if (dateDebutControl && dateFinControl) {\n      const dateDebut = new Date(dateDebutControl.value);\n      const dateFin = new Date(dateFinControl.value);\n      if (dateDebut && dateFin && dateDebut > dateFin) {\n        return {\n          xFieldValidator: new CustomMessageAndFocus(\n            \'La date de début doit être antérieure à la date de fin\',\n            \'dateDebut\',\n            [\'dateDebut\', \'dateFin\']\n          )\n        };\n      }\n    }\n    return null;\n  }\n});\n<\/script>\n\n`\n  })\n}',...ExempleNominal.parameters?.docs?.source}}}},"./projects/zac-ng-lib/src/lib/form/textarea/textarea.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":root .form_field_wrapper.readonly:has(.textarea-readonly) {\n  flex-direction: column;\n  width: auto;\n}\n:root .form_field_wrapper.readonly:has(.textarea-readonly) .zac-textarea, :root .form_field_wrapper.readonly:has(.textarea-readonly) .textarea {\n  background-color: transparent;\n  width: auto;\n  max-width: unset;\n  max-height: unset;\n  border: none;\n}\n:root .form_field_wrapper.readonly:has(.textarea-readonly) .zac-textarea textarea[readonly], :root .form_field_wrapper.readonly:has(.textarea-readonly) .textarea textarea[readonly] {\n  background-color: transparent;\n  width: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/zac-ng-lib/src/lib/form/textarea/textarea.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>TextareaComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var TextareaComponent_1,textarea_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/form/textarea/textarea.component.scss?ngResource"),textarea_componentngResource_default=__webpack_require__.n(textarea_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),value_accessor_base=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/value-accessor-base.ts"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),configuration_zac=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/config/configuration-zac.ts");class TextareaConfig{rowStyleProperty="--zac-textarea-min-line-number";configureRow=(vab,row)=>{row?vab.elementRef?.nativeElement.style.setProperty(this.rowStyleProperty,""+row):vab.elementRef?.nativeElement.style.removeProperty(this.rowStyleProperty)}}let TextareaComponent=class TextareaComponent extends value_accessor_base.k{static{TextareaComponent_1=this}elementRef;renderer;static ConfigToken=new core.InjectionToken("ZacTextareaConfigToken",{providedIn:"platform",factory:()=>new configuration_zac.MP(new TextareaConfig).asRoot()});set maxlength(value){this._maxlength=value,this.afterMaxLengthChange()}get maxlength(){return this._maxlength}row=(0,core.input)(void 0,{transform:core.numberAttribute});cols;visibleCounterMessage="caractère # ";textarea;_maxlength=0;unsub$=new Subject.B;validator=()=>null;textareaConfig=(0,core.inject)(TextareaComponent_1.ConfigToken);constructor(injector,elementRef,renderer){super(injector,elementRef),this.elementRef=elementRef,this.renderer=renderer,(0,core.effect)((()=>{this.$isReadonlyState()?this.textareaConfig.configureRow(this,void 0):this.textareaConfig.configureRow(this,this.row())}))}ngOnInit(){super.ngOnInit(),this.renderer.addClass(this.elementRef.nativeElement,"textarea"),this.copyAttributesToBoundElement(["row","cols"])}ngOnDestroy(){this.unsub$.next()}ngAfterViewInit(){super.ngAfterViewInit(),this.listenInputEventAndUpdateInnerValue()}afterMaxLengthChange(){this._maxlength?(this.validator=fesm2022_forms.k0.maxLength(this._maxlength),this.displayCounter()):this.validator=()=>null}listenInputEventAndUpdateInnerValue(){this.textarea?.nativeElement&&(0,fromEvent.R)(this.textarea.nativeElement,"input").pipe((0,takeUntil.Q)(this.unsub$),(0,map.T)((inputEvent=>inputEvent?.target?.value)),(0,tap.M)((v=>this.innerValue=v.trim())),(0,tap.M)((_=>{this.displayCounter(),this.cdr.detectChanges()}))).subscribe()}validate(control){return this.validator?.(control)??null}determineIfRoleGroup(){return!1}whenOutterValueChange(value){super.whenOutterValueChange(value),this.displayCounter()}focus(){this.textarea?.nativeElement?.focus()}displayCounter(){this.visibleCounterMessage=this.buildCounterMessage()}buildCounterMessage(){const i=this.calcRestant(),s=Math.abs(i)>1?"s":"";return i>0?`${i} caractère${s} restant${s}`:0===i?"0 caractère restant":`0 caractère restant (${Math.abs(i)} caractère${s} en trop)`}calcRestant(){return this._maxlength-(this.innerValue?.trim().length??0)}static ctorParameters=()=>[{type:core.Injector},{type:core.ElementRef},{type:core.Renderer2}];static propDecorators={maxlength:[{type:core.Input}],row:[{type:core.Input,args:[{isSignal:!0,alias:"row",required:!1,transform:void 0}]}],cols:[{type:core.Input}],textarea:[{type:core.ViewChild,args:["textarea",{read:core.ElementRef}]}]}};TextareaComponent=TextareaComponent_1=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-textarea",template:'<ng-container *ngIf="!$isReadonlyState(); else caseReadonly">\n  <textarea\n    #textarea\n    [attr.aria-describedby]="\'textarea-announcer-\' + id"\n    [attr.id]="\'zac-textarea-\' + id"\n    [value]="innerValue ?? \'\'"\n    ></textarea\n  >\n  <p *ngIf="maxlength > 0" id="textarea-announcer-{{ id }}">\n    {{ visibleCounterMessage }}\n  </p>\n</ng-container>\n<ng-template #caseReadonly>\n  <div class="textarea-readonly" readonly [innerHTML]="innerValue"></div>\n</ng-template>\n',encapsulation:core.ViewEncapsulation.None,standalone:!0,imports:[common_module_Dx7dWex5.bT],providers:[{provide:fesm2022_forms.kq,useExisting:TextareaComponent,multi:!0},{provide:fesm2022_forms.cz,useExisting:TextareaComponent,multi:!0}],host:{class:"zac-textarea"},changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[textarea_componentngResource_default()]})],TextareaComponent)}}]);