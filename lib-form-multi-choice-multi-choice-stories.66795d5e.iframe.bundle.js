"use strict";(self.webpackChunkzac_ng_lib=self.webpackChunkzac_ng_lib||[]).push([[899],{"./node_modules/rxjs/dist/esm5/internal/operators/timeout.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>timeout});var _scheduler_async__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/scheduler/async.js"),_util_isDate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isDate.js"),_util_lift__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_util_createErrorClass__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),_util_executeSchedule__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js"),TimeoutError=(0,_util_createErrorClass__WEBPACK_IMPORTED_MODULE_0__.L)((function(_super){return function TimeoutErrorImpl(info){void 0===info&&(info=null),_super(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=info}}));function timeout(config,schedulerArg){var _a=(0,_util_isDate__WEBPACK_IMPORTED_MODULE_1__.v)(config)?{first:config}:"number"==typeof config?{each:config}:config,first=_a.first,each=_a.each,_b=_a.with,_with=void 0===_b?timeoutErrorFactory:_b,_c=_a.scheduler,scheduler=void 0===_c?null!=schedulerArg?schedulerArg:_scheduler_async__WEBPACK_IMPORTED_MODULE_2__.E:_c,_d=_a.meta,meta=void 0===_d?null:_d;if(null==first&&null==each)throw new TypeError("No timeout provided.");return(0,_util_lift__WEBPACK_IMPORTED_MODULE_3__.N)((function(source,subscriber){var originalSourceSubscription,timerSubscription,lastValue=null,seen=0,startTimer=function(delay){timerSubscription=(0,_util_executeSchedule__WEBPACK_IMPORTED_MODULE_4__.N)(subscriber,scheduler,(function(){try{originalSourceSubscription.unsubscribe(),(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__.Tg)(_with({meta,lastValue,seen})).subscribe(subscriber)}catch(err){subscriber.error(err)}}),delay)};originalSourceSubscription=source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_6__._)(subscriber,(function(value){null==timerSubscription||timerSubscription.unsubscribe(),seen++,subscriber.next(lastValue=value),each>0&&startTimer(each)}),void 0,void 0,(function(){(null==timerSubscription?void 0:timerSubscription.closed)||null==timerSubscription||timerSubscription.unsubscribe(),lastValue=null}))),!seen&&startTimer(null!=first?"number"==typeof first?first:+first-scheduler.now():each)}))}function timeoutErrorFactory(info){throw new TimeoutError(info)}},"./node_modules/rxjs/dist/esm5/internal/util/isDate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isValidDate(value){return value instanceof Date&&!isNaN(value)}__webpack_require__.d(__webpack_exports__,{v:()=>isValidDate})},"./projects/zac-ng-lib/src/lib/form/multi-choice/multi-choice.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExempleNominal:()=>ExempleNominal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>multi_choice_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),form_field_component=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-field/form-field.component.ts"),button_component=__webpack_require__("./projects/zac-ng-lib/src/lib/button/button.component.ts"),errors_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/form/form-error/errors/errors.directive.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),selectable_accessor_base=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/selectable-accessor-base.ts"),coercions=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/util/coercions.ts"),content_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/content.directive.ts");let ViewContainerDirective=class ViewContainerDirective{vcr;constructor(vcr){this.vcr=vcr}static ctorParameters=()=>[{type:core.ViewContainerRef}]};ViewContainerDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[zacViewContainer]",exportAs:"viewContainer",standalone:!0})],ViewContainerDirective);var common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),on_init_directive=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/on-init.directive.ts"),light_icon_component=__webpack_require__("./projects/zac-ng-lib/src/lib/theme/icon/light-icon.component.ts");const cssContext=new(__webpack_require__("./projects/zac-ng-lib/src/lib/shared/css/css-context.ts").T);let MultiChoiceComponent=class MultiChoiceComponent extends selectable_accessor_base.d{set choiceList(value){this._choiceList=value}cssClasses;contentType;horizontal=(0,core.input)(!1,{transform:core.booleanAttribute});get choiceList(){return this._choiceList}_choiceList;choiceOptionList;choiceIconList;vcr;multiChoiceContent;constructor(injector,elementRef){super(injector,elementRef),this.createEffectWhenHorizontalInputChange()}createEffectWhenHorizontalInputChange(){(0,core.effect)((()=>{cssContext.toggleComponentHorizontal(this,this.horizontal())}))}ngOnInit(){super.ngOnInit(),cssContext.initializeComponent(this),this.elementRef.nativeElement.classList.add("multi-choice")}ngOnChanges(changes){changes.choiceList&&(this._choiceList=changes.choiceList.currentValue,this.choiceOptionList=(0,coercions.A)(changes.choiceList.currentValue),this.choiceIconList=this.choiceOptionList)}getNgClass(name){return this.cssClasses&&(this.cssClasses[name]||"")}isChecked(key){return this.innerValue?.indexOf(key)>-1}onCheckboxChange($event){const value=$event.target.value,checked=$event.target.checked;this.innerValue||(this.innerValue=[]),this.innerValue=checked&&"NONE"!==value?this.innerValue?.concat(value)??null:this.innerValue?.filter((v=>v!==value))??null}onInitDynamicContent(viewContainer,choice){viewContainer&&this.contentType&&this.loadComponent(viewContainer.vcr,this.contentType,choice)}focus(){const els=this.elementRef?.nativeElement?.querySelector("input:first-child");els&&els.focus()}loadComponent(container,componentType,choice){const viewContainerRef=container;viewContainerRef.clear();viewContainerRef.createComponent(componentType).instance.choice=choice}getContext(choice){return{$implicit:choice}}findLibelleForValue(innerValue){return this.innerValue?.map((code=>this.choiceOptionList?.find((co=>co[0]===code))?.[1])).join(", ")}static ctorParameters=()=>[{type:core.Injector},{type:core.ElementRef}];static propDecorators={choiceList:[{type:core.Input}],cssClasses:[{type:core.Input}],contentType:[{type:core.Input}],horizontal:[{type:core.Input,args:[{isSignal:!0,alias:"horizontal",required:!1,transform:void 0}]}],vcr:[{type:core.ViewChild,args:["dynamicContainer",{read:core.ViewContainerRef}]}],multiChoiceContent:[{type:core.ContentChild,args:[content_directive.$,{read:core.TemplateRef}]}]}};MultiChoiceComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-multi-choice",template:'<ng-container *ngIf="!$isReadonlyState() else caseReadonly">\n<ul [ngClass]="getNgClass(\'ul\')">\n  <li\n    *ngFor="let choice of choiceOptionList; let i = index"\n    [attr.class]="cssClasses?.li"\n  >\n    <input\n      type="checkbox"\n      id="{{ id + choice[0] }}"\n      [name]="id"\n      [attr.name]="id"\n      [value]="choice[0]"\n      [checked]="isChecked(choice[0])"\n      (change)="onCheckboxChange($event)"\n      [ngClass]="getNgClass(\'input\')"\n      #input\n    />\n\n    <label [ngClass]="getNgClass(\'label\')" for="{{ id + choice[0] }}" #label>\n      <ng-container *ngIf="contentType">\n        \x3c!-- Customisation par composant chargé dynamiquement --\x3e\n        <div\n          zacViewContainer\n          #viewContainer="viewContainer"\n          (zacOnInit)="onInitDynamicContent(viewContainer, choice)"\n        ></div>\n      </ng-container>\n      <ng-container *ngIf="!contentType">\n        <ng-container\n          *ngIf="multiChoiceContent; else defaultMultiChoiceContent"\n        >\n          \x3c!-- Customisation par projection via zacContent --\x3e\n          <ng-container\n            *ngTemplateOutlet="\n              multiChoiceContent;\n              context: getContext(choice)\n            "\n          >\n          </ng-container>\n        </ng-container>\n        <ng-template #defaultMultiChoiceContent>\n          \x3c!-- Contenu de base --\x3e\n          <span class="choice-label-text">{{ choice[1] }}</span>\n          <span\n            class="choice-icon"\n            *ngIf="choiceIconList && choiceIconList[i][2] as choiceIcon"\n          >\n            <zac-light-icon [icon]="choiceIcon" ></zac-light-icon>\n          </span>\n        </ng-template>\n      </ng-container>\n    </label>\n  </li>\n</ul>\n</ng-container>\n<ng-template #caseReadonly>\n  <input readonly [value]="findLibelleForValue(innerValue)"/>\n</ng-template>\n',encapsulation:core.ViewEncapsulation.None,imports:[common_module_Dx7dWex5.YU,common_module_Dx7dWex5.Sq,on_init_directive.t,common_module_Dx7dWex5.bT,common_module_Dx7dWex5.T3,ViewContainerDirective,light_icon_component.N],providers:[{provide:fesm2022_forms.kq,useExisting:MultiChoiceComponent,multi:!0}],changeDetection:core.ChangeDetectionStrategy.OnPush})],MultiChoiceComponent);var CVA=__webpack_require__("./.storybook/common/CVA.md"),IntroStory=__webpack_require__("./.storybook/common/IntroStory.md");const multi_choice_stories={title:"Formulaire/MultiChoice",component:MultiChoiceComponent,tags:["docs"],decorators:[(0,dist.moduleMetadata)({imports:[fesm2022_forms.YN,fesm2022_forms.X1,form_field_component.K,button_component.Q,errors_directive.R]})],argTypes:{model:{control:"object",table:{disable:!0}},readonly:{control:"boolean",description:"Mettre true pour sur <b>zac-form-field</b> forcer le champ en readonly."}}},ExempleNominal={name:"Exemple nominal",args:{model:{choices:[]},horizontal:!1,choiceList:[["1","Un"],["2","Deux"],["3","Trois"]],disabled:!1,readonly:!1},parameters:{docs:{description:{story:`\n${CVA}\n${IntroStory}`},source:{type:"auto",language:"html"}}},render:args=>({props:{...args,onSubmit:()=>{console.log("submit")}},moduleMetadata:{imports:[fesm2022_forms.YN]},template:'\n<div style="max-width: 520px">\n<form  novalidate zacErrors (ngSubmit)="onSubmit()">\n  <zac-form-field label="Votre sélection :" [readonly]="readonly">\n    <zac-multi-choice\n      required\n      id="themes"\n      name="themes"\n      [choiceList]="choiceList"\n      [horizontal]="horizontal"\n      [disabled]="disabled"\n      [(ngModel)]="model.choices"\n      >\n    </zac-multi-choice>\n  </zac-form-field>\n  <p style="margin-top: .5rem; font-size: .875rem; color: #666;">Valeur: {{ model.choices }}</p>\n  <zac-button [name]="\'Valider\'" />\n  </form>\n</div>\n'})},__namedExportsOrder=["ExempleNominal"];ExempleNominal.parameters={...ExempleNominal.parameters,docs:{...ExempleNominal.parameters?.docs,source:{originalSource:"{\n  name: 'Exemple nominal',\n  args: {\n    model: {\n      choices: []\n    },\n    horizontal: false,\n    choiceList: [['1', 'Un'], ['2', 'Deux'], ['3', 'Trois']],\n    disabled: false,\n    readonly: false\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\\n${cvaMd}\\n${introStoryMd}`\n      },\n      source: {\n        type: 'auto',\n        language: 'html'\n      }\n    }\n  },\n  render: args => ({\n    props: {\n      ...args,\n      onSubmit: () => {\n        console.log('submit');\n      }\n    },\n    moduleMetadata: {\n      imports: [FormsModule]\n    },\n    template: template\n  })\n}",...ExempleNominal.parameters?.docs?.source}}}},"./projects/zac-ng-lib/src/lib/shared/widget/content.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>ContentDirective});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let ContentDirective=class ContentDirective{templateRef;focusable=!1;constructor(templateRef){this.templateRef=templateRef}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef}];static propDecorators={focusable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}]}};ContentDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"zacContent,[zacContent]",standalone:!0})],ContentDirective);let AfterDirective=class AfterDirective{templateRef;after;focusable=!1;constructor(templateRef){this.templateRef=templateRef}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef}];static propDecorators={after:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:["zacAfter"]}],focusable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}]}};AfterDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"zacAfter,[zacAfter]",standalone:!0})],AfterDirective)},"./projects/zac-ng-lib/src/lib/shared/widget/on-init.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>OnInitDirective});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let OnInitDirective=class OnInitDirective{elementRef;zacOnInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;zacAfterViewInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;zacAfterContentInit=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;constructor(elementRef){this.elementRef=elementRef}ngOnInit(){this.zacOnInit.emit(this.elementRef.nativeElement)}ngAfterViewInit(){this.zacAfterViewInit.emit(this.elementRef.nativeElement)}ngAfterContentInit(){this.zacAfterContentInit.emit(this.elementRef.nativeElement)}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef}];static propDecorators={zacOnInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}],zacAfterViewInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}],zacAfterContentInit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}]}};OnInitDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"[zacOnInit],[zacAfterViewInit],[zacAfterContentInit]",standalone:!0})],OnInitDirective)},"./projects/zac-ng-lib/src/lib/shared/widget/selectable-accessor-base.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>SelectableAccessorBase});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_focusgroup_accessor_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/widget/focusgroup-accessor-base.ts"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/first.js");let SelectableAccessorBase=class SelectableAccessorBase extends _focusgroup_accessor_base__WEBPACK_IMPORTED_MODULE_0__.I{$select=new rxjs__WEBPACK_IMPORTED_MODULE_1__.B;selectedValue;onMouseup(){this.fireSelectValue()}onSpace(element,event){super.onSpace(element,event),this.fireSelectValue()}onEnter(element,event){element.click(),event.preventDefault()}constructor(injector,elementRef){super(injector,elementRef),this.selectedValue=this.$select.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.H)((()=>this.valueChange.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.$)()))))}fireSelectValue(){this.$select.next()}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.Injector},{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.ElementRef}];static propDecorators={selectedValue:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.Output}],onMouseup:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.HostListener,args:["mouseup"]}],onSpace:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.HostListener,args:["keydown.space",["$event.target","$event"]]}],onEnter:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_4__.HostListener,args:["keydown.enter",["$event.target","$event"]]}]}};SelectableAccessorBase=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.Directive)({selector:"SelectableAccessorBase",standalone:!1})],SelectableAccessorBase)}}]);