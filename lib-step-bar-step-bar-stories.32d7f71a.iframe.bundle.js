(self.webpackChunkzac_ng_lib=self.webpackChunkzac_ng_lib||[]).push([[242],{"./projects/zac-ng-lib/src/lib/step-bar/step-bar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.step-bar-container {\n  margin: 0 0.25rem;\n}\n@media (width >= 48em) {\n  .step-bar-container .step-bar-mobile {\n    display: none;\n  }\n}\n.step-bar-container .step-bar-desktop {\n  display: none;\n}\n@media (width > 48em) {\n  .step-bar-container .step-bar-desktop {\n    display: flex;\n  }\n}\n.step-bar-container .step-bar-list {\n  width: 100%;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  list-style: none;\n  position: relative;\n}\n.step-bar-container .step-bar-item {\n  counter-increment: nav-counter;\n  z-index: 10;\n}\n.step-bar-container .step-bar-item button {\n  display: inline-block;\n  flex-direction: unset;\n  align-content: unset;\n  align-items: unset;\n  padding: unset;\n  gap: unset;\n  overflow: unset;\n  appearance: none;\n  text-align: unset;\n  text-decoration: none;\n  -webkit-user-select: none;\n          user-select: none;\n  width: unset;\n  min-height: unset;\n  min-width: unset;\n  background-color: transparent;\n  border: none;\n}\n.step-bar-container .step-bar-item-index {\n  display: flex;\n  flex-wrap: nowrap;\n  align-content: center;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n}\n.step-bar-container .step-bar-item-index:before {\n  content: counter(nav-counter);\n}\n.step-bar-container .step-bar-item-index.checked {\n  cursor: pointer;\n}\n.step-bar-container .step-bar-item-index.checked:before {\n  content: "";\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/zac-ng-lib/src/lib/step-bar/step-bar.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DemoStepBarComponent:()=>DemoStepBarComponent,ExempleNominal:()=>ExempleNominal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>step_bar_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs");var StepBarService_1,step_bar_componentngResource=__webpack_require__("./projects/zac-ng-lib/src/lib/step-bar/step-bar.component.scss?ngResource"),step_bar_componentngResource_default=__webpack_require__.n(step_bar_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let StepBarService=class StepBarService{static{StepBarService_1=this}_steps;static NB_MAX_STEPS=6;get indexCurrentStep(){return this._indexCurrentStep}set indexCurrentStep(value){this._indexCurrentStep=value,this.$indexCurrentStepWriter.set(value)}$indexCurrentStepWriter=(0,core.signal)(this.indexCurrentStep);$indexCurrentStep=this.$indexCurrentStepWriter.asReadonly();_indexCurrentStep=-1;maxStepReached=-1;constructor(_steps=[]){this._steps=_steps}get steps(){return this._steps}set steps(value){this._steps=value,this.reset()}getStepForPath(path){return this.steps.find((step=>step.path===path))}getStepForLabel(label){return this.steps.find((step=>step.libelle===label))}nextStep(){if(!this.hasNext())throw new Error("step out of range");this.indexCurrentStep++,this.maxStepReached=Math.max(this.indexCurrentStep,this.maxStepReached)}hasNext(){return this._indexCurrentStep<this.steps.length}previousStep(){if(!this.hasPrevious())throw new Error("step out of range");this.indexCurrentStep--}hasPrevious(){return this.indexCurrentStep>-1}navigateToPrevious(stepNumber){if(!(stepNumber<=this.steps.length))throw new Error("step out of range");this.indexCurrentStep=stepNumber-1}reset(){this.indexCurrentStep=-1,this.maxStepReached=-1}stepUntilPath(path,reset=!1){reset&&this.reset();let index=-1;return this.steps.find((v=>(index++,v.path===path)))?(this.indexCurrentStep=index,this.maxStepReached=Math.max(this.maxStepReached,index),!0):(this.indexCurrentStep=-1,!1)}isCurrentStepAlreadyReached(){return this.maxStepReached>-1&&this._indexCurrentStep<=this.maxStepReached}isCurrentStepAlreadyPassed(){return this.maxStepReached>-1&&this.indexCurrentStep<this.maxStepReached-1}assertNbStepLowerThanNB_MAX_STEPS(){const nbSteps=this._steps?.length;if(nbSteps>StepBarService_1.NB_MAX_STEPS){const msg=`StepBarService.ctor() : Nombre maxi de steps autoriséspar le Design System  (${StepBarService_1.NB_MAX_STEPS}) dépassé : ${nbSteps}`;throw alert(msg),new Error(msg)}}initialize(steps){this.steps=steps,this.reset()}static ctorParameters=()=>[{type:Array,decorators:[{type:core.Optional},{type:core.Inject,args:["_token_bidon_obligatoire"]}]}]};StepBarService=StepBarService_1=(0,tslib_es6.Cg)([(0,core.Injectable)()],StepBarService);var StepBarComponent_1,router_Dwfin5Au=__webpack_require__("./node_modules/@angular/router/fesm2022/router-Dwfin5Au.mjs"),boolean_property_DaaVhX5A=__webpack_require__("./node_modules/@angular/cdk/fesm2022/boolean-property-DaaVhX5A.mjs"),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),free_solid_svg_icons=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),pro_light_svg_icons=__webpack_require__("./node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),component_icons_catalog=__webpack_require__("./projects/zac-ng-lib/src/lib/theme/component-icons-catalog.ts"),theme_service=__webpack_require__("./projects/zac-ng-lib/src/lib/theme/theme.service.ts"),light_icon_component=__webpack_require__("./projects/zac-ng-lib/src/lib/theme/icon/light-icon.component.ts"),css_context=__webpack_require__("./projects/zac-ng-lib/src/lib/shared/css/css-context.ts");class StepBarCssContext extends css_context.T{stepBarContainer="step-bar-container";stepBarList="step-bar-list";stepBarDesktop="step-bar-desktop";stepBarItem="step-bar-item";stepBarMobile="step-bar-mobile";stepBarItemIndex="step-bar-item-index";current="current";checked="checked";stepBarItemName="step-bar-item-name";displayStepMobile="display-step-mobile";stepBarMobileStepLocation="step-bar-mobile--step-location";stepBarMobileStepSeparator="step-bar-mobile--step-separator";stepBarMobileStepLibelle="step-bar-mobile--step-libelle";stepBarTotalStep="--zac-stepbar-total-step";stepBarCurrentStep="--zac-stepbar-current-step"}const cssContext=new StepBarCssContext;let StepBarComponent=class StepBarComponent{static{StepBarComponent_1=this}stepBarService;router;static componentIconsCatalog=new component_icons_catalog.P1(StepBarComponent_1,[free_solid_svg_icons.e68],[pro_light_svg_icons.e68]);navigable=(0,core.input)(!0);set navigationRole(value){this._navigationRole=(0,boolean_property_DaaVhX5A.c)(null==value||value)}get navigationRole(){return this._navigationRole}get $indexCurrentStep(){return this.stepBarService.$indexCurrentStep}_navigationRole=!0;constructor(stepBarService,router){this.stepBarService=stepBarService,this.router=router,(0,core.inject)(theme_service.F).feedIconLibraryForComponent(StepBarComponent_1.componentIconsCatalog)}ngOnInit(){this.stepBarService.assertNbStepLowerThanNB_MAX_STEPS()}navigateToPrevious(index){this.stepBarService.navigateToPrevious(index+1),this.router.navigateByUrl(this.stepBarService.steps[index].path).then()}isDisplayed(){return this.stepBarService.indexCurrentStep>=0&&this.stepBarService.indexCurrentStep<this.stepBarService.steps.length}getSteps(){return this.stepBarService.steps}get stepLength(){return this.getSteps().length}get currentIndex(){return this.stepBarService.indexCurrentStep}getCurrentIndex(){return this.currentIndex}navigatToPreviousIfPossible(index){index<this.getCurrentIndex()&&this.navigateToPrevious(index)}isSpacerToAdd(step){return this.getSteps().indexOf(step)!==this.getSteps().length-1}libelleEtapeA11y(step,index){const etape=`Etape n° ${index+1} sur ${this.getSteps().length} `;return index<this.getCurrentIndex()?etape+", passée : "+step.libelle:index===this.getCurrentIndex()?etape+", courante : "+step.libelle:etape+",  future : "+step.libelle}cssContext=cssContext;getStepBarItemClasses(index){return{[cssContext.stepBarItemIndex]:!0,[cssContext.current]:index===this.getCurrentIndex(),[cssContext.checked]:index<this.getCurrentIndex()&&this.navigable()}}static ctorParameters=()=>[{type:StepBarService},{type:router_Dwfin5Au.Ix}];static propDecorators={navigable:[{type:core.Input,args:[{isSignal:!0,alias:"navigable",required:!1,transform:void 0}]}],navigationRole:[{type:core.Input}],stepLength:[{type:core.HostBinding,args:["style.--zac-stepbar-total-step"]}],currentIndex:[{type:core.HostBinding,args:["style.--zac-stepbar-current-step"]}]}};StepBarComponent=StepBarComponent_1=(0,tslib_es6.Cg)([(0,core.Component)({selector:"zac-step-bar",template:'<ng-container *ngIf="$indexCurrentStep() != undefined && isDisplayed()">\n  \x3c!-- cas ou on est dans un nav --\x3e\n  <ng-container *ngIf="navigationRole !== false; else noNavigationRole">\n    <nav\n      role="navigation"\n      [ngClass]="cssContext.stepBarContainer"\n      aria-label="étapes du téléservice"\n    >\n      <ng-container [ngTemplateOutlet]="body"></ng-container>\n    </nav>\n  </ng-container>\n\n  \x3c!-- cas ou on est PAS dans un nav --\x3e\n  <ng-template #noNavigationRole>\n    <section [ngClass]="cssContext.stepBarContainer" aria-label="étapes du téléservice">\n      <ng-container [ngTemplateOutlet]="body"></ng-container>\n    </section>\n  </ng-template>\n</ng-container>\n\n\x3c!-- BODY utilisé dans les 2 cas, avec et sans nav --\x3e\n<ng-template #body>\n  <ng-container>\n    \x3c!-- TEMPLATE DESKTOP--\x3e\n    <ul [ngClass]="[cssContext.stepBarList, cssContext.stepBarDesktop]">\n      <ng-container *ngFor="let step of getSteps(); let index = index">\n        \x3c!-- Cas d\'une étape passée, sur laquelle on peut retourner : button --\x3e\n        <li *ngIf="index < getCurrentIndex() && navigable()"\n            [ngClass]="cssContext.stepBarItem">\n\n          <button type="button"\n                  tabindex="0"\n                  [attr.aria-label]="libelleEtapeA11y(step, index)"\n                  (keydown.enter)="navigatToPreviousIfPossible(index)"\n                  (keydown.space)="navigatToPreviousIfPossible(index)"\n                  (click)="navigatToPreviousIfPossible(index)">\n\n            <ng-container *ngTemplateOutlet="li_content"></ng-container>\n          </button>\n        </li>\n\n        \x3c!-- Cas d\'une étape courante ou future, sur laquelle on peut PAS aller : juste li --\x3e\n        <li *ngIf="index >= getCurrentIndex() || !navigable()" [ngClass]="cssContext.stepBarItem">\n          <ng-container *ngTemplateOutlet="li_content"></ng-container>\n        </li>\n\n        \x3c!-- content d\'une étape, passée, courante ou future --\x3e\n        <ng-template #li_content>\n          <span [ngClass]="cssContext.srOnly" *ngIf="index >= getCurrentIndex()">{{\n              libelleEtapeA11y(step, index)\n            }}</span>\n          <div\n            aria-hidden="true"\n            class="step-bar-item-index"\n            [ngClass]="getStepBarItemClasses(index)"\n          >\n            <span *ngIf="index < getCurrentIndex() && navigable">\n              <zac-light-icon iconName="check"/></span>\n          </div>\n          <div [ngClass]="cssContext.stepBarItemName">\n            <span aria-hidden="true">{{ step.libelle }}</span>\n          </div>\n        </ng-template>\n      </ng-container>\n    </ul>\n\n    \x3c!-- TEMPLATE MOBILE--\x3e\n    <p [ngClass]="[cssContext.displayStepMobile, cssContext.stepBarMobile]">\n      <span [ngClass]="cssContext.stepBarMobileStepLocation"\n      >Étape {{ getCurrentIndex() + 1 }} sur {{ getSteps().length }}</span\n      ><span [ngClass]="cssContext.stepBarMobileStepSeparator"> : </span\n    ><span [ngClass]="cssContext.stepBarMobileStepLibelle">{{\n        getSteps()[getCurrentIndex()].libelle\n      }}</span>\n    </p>\n  </ng-container>\n</ng-template>\n',encapsulation:core.ViewEncapsulation.None,changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common_module_Dx7dWex5.bT,common_module_Dx7dWex5.T3,common_module_Dx7dWex5.Sq,common_module_Dx7dWex5.YU,light_icon_component.N],styles:[step_bar_componentngResource_default()]})],StepBarComponent);var button_component=__webpack_require__("./projects/zac-ng-lib/src/lib/button/button.component.ts");const DemoStepBarComponentTemplate='\n<main class="main-container">\n\n    \x3c!-- Instance de zac-step-bar unique à mettre dans un composant parent de layout global,\n         par exemple AppComponent --\x3e\n    <zac-step-bar [navigable]="navigable"/>\n\n    <h1 class="zac-text:form-section-title">Composant de test de la step-bar</h1>\n    <section class="zac-container--bordered zac-container:blue">\n\n      <p>Index courant : {{stepBarService.$indexCurrentStep()}}</p>\n\n      <div class="@container:zac-button-group control_bar">\n        <div class="zac-button-group">\n            <zac-button\n              [name]="\'Precedent\'"\n              label="Précédent"\n              (action)="previousStep()"\n            />\n            <zac-button\n              [name]="\'Suivant\'"\n              label="Suivant"\n              (action)="nextStep()"\n            />\n        </div>\n      </div>\n\n    </section>\n\n    \x3c!-- Dans le contrôleur TypeScript angular du composant parent --\x3e\n    <script>\n      protected readonly stepBarService = inject(StepBarService);\n\n      ngOnInit(): void {\n        this.stepBarService.initialize(this.steps);\n      }\n\n      nextStep() {\n        this.stepBarService.nextStep();\n      }\n\n      previousStep() {\n        this.stepBarService.previousStep();\n      }\n    <\/script>\n\n</main>\n';let DemoStepBarComponent=class DemoStepBarComponent{navigable;steps=[];stepBarService=(0,core.inject)(StepBarService);ngOnInit(){this.stepBarService.initialize(this.steps)}nextStep(){this.stepBarService.nextStep()}previousStep(){this.stepBarService.previousStep()}static propDecorators={navigable:[{type:core.Input}],steps:[{type:core.Input}]}};DemoStepBarComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"demo-step-bar",imports:[button_component.Q,StepBarComponent],template:DemoStepBarComponentTemplate,standalone:!0})],DemoStepBarComponent);const step_bar_stories={title:"Navigation/StepBar",component:StepBarComponent,tags:["docs"],decorators:[(0,dist.moduleMetadata)({imports:[StepBarComponent,DemoStepBarComponent],providers:[StepBarService]})],argTypes:{navigable:{control:"boolean"},steps:{control:"object",description:"Liste des steps à passer à StepBarService.initialize()"},navigationRole:{control:"boolean"}}},ExempleNominal={name:"Exemple nominal",args:{navigable:!0,steps:[{libelle:"Etape 1",path:"/etape1"},{libelle:"Etape 2",path:"/etape2"},{libelle:"Etape 3",path:"/etape3"},{libelle:"Etape 4",path:"/etape4"}]},parameters:{docs:{source:{code:DemoStepBarComponentTemplate}}},render:args=>({props:args,template:'<demo-step-bar [navigable]="navigable" [steps]="steps"/>'})},__namedExportsOrder=["DemoStepBarComponent","ExempleNominal"];ExempleNominal.parameters={...ExempleNominal.parameters,docs:{...ExempleNominal.parameters?.docs,source:{originalSource:"{\n  name: 'Exemple nominal',\n  args: {\n    navigable: true,\n    steps: [{\n      libelle: 'Etape 1',\n      path: '/etape1'\n    }, {\n      libelle: 'Etape 2',\n      path: '/etape2'\n    }, {\n      libelle: 'Etape 3',\n      path: '/etape3'\n    }, {\n      libelle: 'Etape 4',\n      path: '/etape4'\n    }]\n  },\n  parameters: {\n    docs: {\n      source: {\n        code: DemoStepBarComponentTemplate\n      }\n    }\n  },\n  render: args => ({\n    props: args,\n    template: `<demo-step-bar [navigable]=\"navigable\" [steps]=\"steps\"/>`\n  })\n}",...ExempleNominal.parameters?.docs?.source}}}}}]);